require.config({baseUrl:"/javascript",waitSeconds:0,urlArgs:"bust="+(new Date).getTime(),paths:{jquery:"lib/jquery/jquery.min",underscore:"lib/underscore/underscore-min",nicescroll:"vendor/jquery.nicescroll/jquery.nicescroll.min",store2:"lib/store/dist/store2.min",Q:"lib/q/q",backbone:"lib/backbone/backbone-min",wreqr:"lib/backbone.wreqr/lib/backbone.wreqr.min",tpl:"lib/requirejs-tpl/tpl",text:"lib/requirejs-text/text",marionette:"lib/backbone.marionette/lib/backbone.marionette.min",jquery_ui:"vendor/jquery-ui/jquery-ui.min",easing:"lib/jquery-easing/jquery.easing.min",i18n:"lib/i18next/i18next.amd.withJQuery.min",jquery_event_drag:"lib/slickgrid/lib/jquery.event.drag-2.2",slickgrid_core:"lib/slickgrid/slick.core",slickgrid:"lib/slickgrid/slick.grid",slick_rowselect:"lib/slickgrid/plugins/slick.rowselectionmodel",slick_checkbox:"vendor/plugin/slick.checkboxselectcolumn",moment:"lib/moment/moment","moment-timezone":"lib/moment-timezone/builds/moment-timezone-with-data.min",zeroclipboard:"lib/zeroclipboard/dist/ZeroClipboard.min",daterangepicker:"vendor/bootstrap-daterangepicker/daterangepicker",pnotify:"vendor/pnotify/pnotify.core","pnotify.buttons":"vendor/pnotify/pnotify.buttons","pnotify.nonblock":"vendor/pnotify/pnotify.nonblock","visualcaptcha.jquery":"vendor/visualcaptcha.jquery/visualcaptcha.jquery",validate:"lib/jquery.validation/dist/jquery.validate.min",scrollTo:"lib/jquery.scrollTo/jquery.scrollTo.min",pace:"lib/pace/pace.min","jquery-sortable":"lib/jquery-sortable/source/js/jquery-sortable-min",basic:"core/basic",data:"core/basic/data",event:"core/basic/event",net:"core/basic/net",view:"core/basic/view",other:"core/basic/other",dispatcher:"core/functions/Dispatcher",U:"core/functions/Utils",Storage:"core/functions/Storage",Timezone:"core/functions/Timezone",Cookie:"core/functions/Cookie",Logger:"core/functions/Logger",State:"core/functions/State",app:"core/functions/App",formatter:"core/functions/Formatter",language:"core/functions/Language",UI:"core/functions/UI",layout:"core/layout",container:"core/container",component:"core/component",emptyView:"core/component/empty/view",store:"core/store",extend:"core/extend",Captcha:"core/functions/Captcha",C:"config/Config",API:"config/API",semanticui:"../semanticui/dist/semantic",semanticui_accordion:"../semanticui/dist/components/accordion.min",semanticui_checkbox:"../semanticui/dist/components/checkbox.min",semanticui_dimmer:"../semanticui/dist/components/dimmer.min",semanticui_dropdown:"../semanticui/dist/components/dropdown.min",semanticui_form:"../semanticui/dist/components/form.min",semanticui_modal:"../semanticui/dist/components/modal.min",semanticui_popup:"../semanticui/dist/components/popup.min",semanticui_progress:"../semanticui/dist/components/progress.min",semanticui_search:"../semanticui/dist/components/search.min",semanticui_dropdown2:"../semanticui/dist/components/select2.min",semanticui_site:"../semanticui/dist/components/site.min",semanticui_state:"../semanticui/dist/components/state.min",semanticui_tab:"../semanticui/dist/components/tab.min",semanticui_transition:"../semanticui/dist/components/transition.min",semanticui_visibility:"../semanticui/dist/components/visibility.min",com_fun:"modules/common/function",jsonview:"lib/jquery-jsonview/dist/jquery.jsonview",spinjs:"lib/spinjs/spin"},shim:{main:{deps:[],exports:"main"},jquery:{deps:[],exports:"jQuery"},"pnotify.buttons":{deps:["pnotify"]},"pnotify.nonblock":{deps:["pnotify"]},nicescroll:{deps:["jquery"]},"jquery-sortable":{deps:["jquery"]},jquery_event_drag:{deps:["jquery"]},underscore:{deps:[],exports:"_"},backbone:{deps:["underscore","jquery"],exports:"Backbone"},marionette:{deps:["backbone"],exports:"Marionette"},wreqr:{deps:["backbone"]},easing:{deps:["jquery"],exports:"easing"},i18n:{deps:["jquery"],exports:"i18n"},scrollTo:{deps:["jquery"]},slickgrid_core:{deps:["jquery"],exports:"slickgrid_core"},slickgrid:{deps:["jquery_ui","slickgrid_core","jquery_event_drag"],exports:"Slick"},slick_rowselect:{deps:["slickgrid"]},slick_checkbox:{deps:["slickgrid"]},moment:{exports:"moment",init:function(){return window.moment=this.moment,this.moment}},"moment-timezone":{deps:["moment"],exports:"moment-timezone"},semanticui:{deps:["jquery"]},semanticui_accordion:{deps:["jquery"]},semanticui_api:{deps:["jquery"]},semanticui_checkbox:{deps:["jquery"]},semanticui_dimmer:{deps:["jquery"]},semanticui_dropdown:{deps:["jquery"]},semanticui_form:{deps:["jquery"]},semanticui_nag:{deps:["jquery"]},semanticui_popup:{deps:["jquery"]},semanticui_progress:{deps:["jquery"]},semanticui_rating:{deps:["jquery"]},semanticui_search:{deps:["jquery"]},semanticui_dropdown2:{deps:["jquery"]},semanticui_shape:{deps:["jquery"]},semanticui_sidebar:{deps:["jquery"]},semanticui_site:{deps:["jquery"]},semanticui_state:{deps:["jquery"]},semanticui_tab:{deps:["jquery"]},semanticui_transition:{deps:["jquery"]},semanticui_video:{deps:["jquery"]},semanticui_visibility:{deps:["jquery"]},semanticui_modal:{deps:["semanticui_transition","semanticui_dimmer"],exports:"semanticui_modal"},jsonview:{deps:["jquery"]}}}),define("main",function(e){return function(){var t;return t||e.main}}(this)),define("app",["backbone","marionette"],function(e){var t=new e.Marionette.Application;return window.Application=t,t}),define("config/App",[],function(){return{isDebug:!1,isProduct:!0}}),define("config/User",[],function(){return{AppId:"",SessionToken:"",Timezone:"Asia/Shanghai"}}),define("config/Ajax",[],function(){return{TIMEOUT:2e4,HTTPHEADER:{}}}),define("config/UI",[],function(){return{SlickGrid:{editable:!0,headerRowHeight:46,rowHeight:40,autoEdit:!1,enableCellNavigation:!0,asyncEditorLoading:!1,forceFitColumns:!1},Table:{table_class:"ui single line sortable table",header_class:"",body_class:"",header_cell_class:"",cell_class:"",display_header:!0,row_color:!0}}}),define("config/Filter",[],function(){return{String:[{name:"=",value:"eq"},{name:"!=",value:"ne"},{name:"exists",value:"exists"},{name:"start with",value:"start with"}],Number:[{name:">",value:"gt"},{name:">=",value:"gte"},{name:"<",value:"lt"},{name:"<=",value:"lte"},{name:"=",value:"eq"},{name:"!=",value:"ne"},{name:"exists",value:"exists"},{name:"not exists",value:"not exists"}],Boolean:[{name:"=",value:"eq"},{name:"exists",value:"exists"},{name:"not exists",value:"not exists"}],Date:[{name:"before",value:"before"},{name:"after",value:"after"},{name:"exists",value:"exists"},{name:"not exists",value:"not exists"}],File:[{name:"exists",value:"exists"},{name:"not exists",value:"not exists"}],GeoPoint:[{name:"exists",value:"exists"},{name:"not exists",value:"not exists"}],Array:[{name:"exists",value:"exists"},{name:"not exists",value:"not exists"},{name:"contains value",value:"contains"},{name:"does not contain value",value:"not contains"},{name:"contains one of",value:"in"},{name:"does not contain any of",value:"nin"}],Object:[{name:"exists",value:"exists"},{name:"not exists",value:"not exists"}],Pointer:[{name:"exists",value:"exists"},{name:"not exists",value:"not exists"}],ACL:[{name:"exists",value:"exists"},{name:"not exists",value:"not exists"}]}}),define("Storage",["store2"],function(e){return window.store2=e,{get:function(t){return e.local.get(t)},set:function(t,i){e.local.set(t,i)},remove:function(t){e.local.remove(t)},clear:function(){e.local.clearAll()}}}),function(e){"function"==typeof define&&define.amd?define("lang/en",["moment"],e):"object"==typeof exports?module.exports=e(require("../moment")):e(window.moment)}(function(e){return e.locale("en",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",L:"YYYY-MM-DD",LL:"MMM D",LLL:"LL HH:mm",LLLL:"YYYY-MM-DD HH:mm:ss",ll:"MMM D",lll:"LL HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(e){var t=e%10,i=1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+i}})}),function(e){"function"==typeof define&&define.amd?define("lang/zh",["moment"],e):"object"==typeof exports?module.exports=e(require("../moment")):e(window.moment)}(function(e){return e.locale("zh",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"Ah点mm",L:"YYYY-MM-DD",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日LT",LLLL:"YYYY-MM-DD HH:mm:ss",l:"YYYY-MM-DD",ll:"MMMD日",lll:"ll HH:mm",llll:"YYYY-MM-DD HH:mm:ss"},meridiem:function(e,t){var i=100*e+t;return 600>i?"凌晨":900>i?"早上":1130>i?"上午":1230>i?"中午":1800>i?"下午":"晚上"},calendar:{sameDay:function(){return 0===this.minutes()?"[今天]Ah[点整]":"[今天]LT"},nextDay:function(){return 0===this.minutes()?"[明天]Ah[点整]":"[明天]LT"},lastDay:function(){return 0===this.minutes()?"[昨天]Ah[点整]":"[昨天]LT"},nextWeek:function(){var t,i;return t=e().startOf("week"),i=this.unix()-t.unix()>=604800?"[下]":"[本]",0===this.minutes()?i+"dddAh点整":i+"dddAh点mm"},lastWeek:function(){var t,i;return t=e().startOf("week"),i=this.unix()<t.unix()?"[上]":"[本]",0===this.minutes()?i+"dddAh点整":i+"dddAh点mm"},sameElse:"LL"},ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"周";default:return e}},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1分钟",mm:"%d分钟",h:"1小时",hh:"%d小时",d:"1天",dd:"%d天",M:"1个月",MM:"%d个月",y:"1年",yy:"%d年"},week:{dow:1,doy:4}})}),function(e){"function"==typeof define&&define.amd?define("lang/ja",["moment"],e):"object"==typeof exports?module.exports=e(require("../moment")):e(window.moment)}(function(e){return e.locale("ja",{months:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日".split("_"),weekdaysShort:"日_月_火_水_木_金_土".split("_"),weekdaysMin:"日_月_火_水_木_金_土".split("_"),longDateFormat:{LT:"Ah時m分",L:"YYYY/MM/DD",LL:"M月D日",LLL:"M月D日LT",LLLL:"YYYY年M月D日LT dddd"},meridiem:function(e){return 12>e?"午前":"午後"},calendar:{sameDay:"[今日] LT",nextDay:"[明日] LT",nextWeek:"[来週]dddd LT",lastDay:"[昨日] LT",lastWeek:"[前週]dddd LT",sameElse:"L"},relativeTime:{future:"%s後",past:"%s前",s:"数秒",m:"1分",mm:"%d分",h:"1時間",hh:"%d時間",d:"1日",dd:"%d日",M:"1ヶ月",MM:"%dヶ月",y:"1年",yy:"%d年"}})}),define("language",["moment","jquery","i18n","Storage","config/App","semanticui_dropdown"],function(e,t,i,a,n){var o={zh:"zh",ja:"ja"},s={langCodes:{en:"en",en_US:"en",zh:"zh",zh_CN:"zh",zh_SG:"zh",zh_TW:"zh_TW",zh_HK:"zh_TW",ja:"ja",de:"de",ru:"ru",pt:"pt_PT",pt_PT:"pt_PT",pt_BR:"pt_BR",es:"es",es_ES:"es",es_AR:"es_419",es_BO:"es_419",es_CO:"es_419",es_CL:"es_419",es_CR:"es_419",es_DO:"es_419",es_EC:"es_419",es_GT:"es_419",es_HN:"es_419",es_MX:"es_419",es_NI:"es_419",es_PY:"es_419",es_PA:"es_419",es_PE:"es_419",es_PR:"es_419",es_SV:"es_419",es_UY:"es_419",es_VE:"es_419"},langNames:{en:"English",zh:"中文",zh_CN:"中文简体",zh_TW:"中文繁体",ja:"日本語",de:"Deutsch",ru:"Русский язык",pt:"Português",nl:"Nederlands",it:"Italiano",fr:"Français",es:"Español"},lowercase:{en:"en_us",zh:"zh_cn"},init:function(e){this.setDefaultLanguage("component",e)},i18n:function(e){return i.t(e)||i.t(e+".default")||""},_getCurLangCode:function(){return"undefined"!=typeof window.navigator.language?window.navigator.language:window.navigator.browserLanguage},getCurLangCode:function(){var e=this,t=a.get("language");if(t)return t;var i=e.langCodes,n="en_US",o=e._getCurLangCode().replace("-","_");return"undefined"!=typeof i[o]?n=i[o]:o.indexOf("_")>-1&&(o=o.split("_")[0],"undefined"!=typeof i[o]&&(n=i[o])),n},getLowerCase:function(e){return e=e||"en",this.lowercase[e]||"en_us"},getLangName:function(e){return this.langNames[e]},setLanguage:function(i,s,r){var l="/locales/__lng__/__ns__.json?t="+(new Date).getTime();n.isProduct||(l="/front/locales/__lng__/__ns__.json"),i=i||this.getCurLangCode(),a.set("language",i);var c=o[i]||"en";a.set("moment",c),e.locale(c),t.i18n.init({lng:i,resGetPath:l,parseMissingKey:function(){return""},objectTreeKeyHandler:function(){return""},ns:s||"component"},function(){r&&"function"==typeof r&&require(["lang/en","lang/zh","lang/ja"],function(){t("#language-menu").dropdown({action:"select",onChange:function(e){a.set("language",e),window.location.reload()}}),r()})})},setDefaultLanguage:function(e,t){var i=this.getCurLangCode()||"en";this.setLanguage(i,e,t)}};return s}),function(e){"function"==typeof define&&define.amd?define("pnotify.buttons",["jquery","pnotify"],e):e(jQuery,PNotify)}(function(e,t){t.prototype.options.buttons={closer:!0,closer_hover:!0,sticker:!0,sticker_hover:!0,labels:{close:"Close",stick:"Stick"}},t.prototype.modules.buttons={myOptions:null,closer:null,sticker:null,init:function(t,i){var a=this;this.myOptions=i,t.elem.on({mouseenter:function(){!a.myOptions.sticker||t.options.nonblock&&t.options.nonblock.nonblock||a.sticker.trigger("pnotify_icon").css("visibility","visible"),!a.myOptions.closer||t.options.nonblock&&t.options.nonblock.nonblock||a.closer.css("visibility","visible")},mouseleave:function(){a.myOptions.sticker_hover&&a.sticker.css("visibility","hidden"),a.myOptions.closer_hover&&a.closer.css("visibility","hidden")}}),this.sticker=e("<div />",{"class":"ui-pnotify-sticker",css:{cursor:"pointer",visibility:i.sticker_hover?"hidden":"visible"},click:function(){t.options.hide=!t.options.hide,t.options.hide?t.queueRemove():t.cancelRemove(),e(this).trigger("pnotify_icon")}}).bind("pnotify_icon",function(){e(this).children().removeClass(t.styles.pin_up+" "+t.styles.pin_down).addClass(t.options.hide?t.styles.pin_up:t.styles.pin_down)}).append(e("<span />",{"class":t.styles.pin_up,title:i.labels.stick})).prependTo(t.container),(!i.sticker||t.options.nonblock&&t.options.nonblock.nonblock)&&this.sticker.css("display","none"),this.closer=e("<div />",{"class":"ui-pnotify-closer",css:{cursor:"pointer",visibility:i.closer_hover?"hidden":"visible"},click:function(){t.remove(!1),a.sticker.css("visibility","hidden"),a.closer.css("visibility","hidden")}}).append(e("<i />",{"class":t.styles.closer,title:i.labels.close})).prependTo(t.container),(!i.closer||t.options.nonblock&&t.options.nonblock.nonblock)&&this.closer.css("display","none")},update:function(e,t){this.myOptions=t,!t.closer||e.options.nonblock&&e.options.nonblock.nonblock?this.closer.css("display","none"):t.closer&&this.closer.css("display","block"),!t.sticker||e.options.nonblock&&e.options.nonblock.nonblock?this.sticker.css("display","none"):t.sticker&&this.sticker.css("display","block"),this.sticker.trigger("pnotify_icon"),t.sticker_hover?this.sticker.css("visibility","hidden"):e.options.nonblock&&e.options.nonblock.nonblock||this.sticker.css("visibility","visible"),t.closer_hover?this.closer.css("visibility","hidden"):e.options.nonblock&&e.options.nonblock.nonblock||this.closer.css("visibility","visible")}},e.extend(t.styling.jqueryui,{closer:"ui-icon ui-icon-close",pin_up:"ui-icon ui-icon-pin-w",pin_down:"ui-icon ui-icon-pin-s"}),e.extend(t.styling.bootstrap2,{closer:"icon-remove",pin_up:"icon-pause",pin_down:"icon-play"}),e.extend(t.styling.bootstrap3,{closer:"icon remove",pin_up:"glyphicon glyphicon-pause",pin_down:"glyphicon glyphicon-play"}),e.extend(t.styling.fontawesome,{closer:"fa fa-times",pin_up:"fa fa-pause",pin_down:"fa fa-play"})}),define("Logger",["language","jquery","pnotify","app","Storage","pnotify.buttons"],function(e,t,i,a,n){function o(e){function t(e){return e=e||n.get("language")||"en",/en/i.test(e)?"en_us/index.html":"zh_cn/index.html"}var i=window.location.hostname;window.location.href=/^localhost/.test(i)?"/login":"/"+t(e)+"?error=session-expire"}var s={};return s.info=function(t,a){t=a&&1==a.doI18n?e.i18n(t):t||"Info",new i({text:t,type:"info",delay:1e3})},s.warning=function(t,a){t=a&&1==a.doI18n?e.i18n(t):t||"Warning",new i({text:t,type:"warning",delay:3e3})},s.success=function(t,a){t=a&&1==a.doI18n?e.i18n(t):t||"Success",new i({text:t,type:"success",icon:"icon check circle",delay:3e3,mouse_reset:!1,buttons:{closer:!0,closer_hover:!1}})},s.error=function(t,s){var r,l,c;if(t instanceof Error)l="Error",r=t.message;else if(t.statusText||t.status){if(l=t.status,t.status&&(200==t.status||201==t.status))return!1;if(t.responseText)try{var d=JSON.parse(t.responseText);r=d.errorMessage||e.i18n("error.net."+d.errorCode),401==t.status&&(c=n.get("language"),a.User.clearUserData(),o(c))}catch(u){r=t.statusText}else if(0==t.status&&"timeout"==t.statusText)r=e.i18n("error.net.0");else{if(0==t.status&&"abort"==t.statusText)return!1;r=t.status+" "+t.statusText}}else l="Error",r=s&&1==s.doI18n?e.i18n(t):t;new i({title:"error",text:r,type:"error",icon:"icon warning sign",delay:3e3,mouse_reset:!1,buttons:{closer:!0,closer_hover:!1}})},s}),define("U",["app","Storage","Logger","language","underscore","jquery","moment"],function(e,t,i,a,n,o,s){return{Clone:function(e,t){var i=this;if("object"==typeof e){var a=null!=e&&e.sort?[]:{};for(var n in e)n!=t&&(a[n]=i.Clone(e[n],t));return a}return"function"==typeof e?(new e).constructor:e},UC_First:function(e){var t=e.toLowerCase(),i=t.replace(/\b\w+\b/g,function(e){return e.substring(0,1).toUpperCase()+e.substring(1)});return i},jumpTo:function(e){window.location.href=e},changeHash:function(e){e.hash&&(window.location.hash=e.hash),e.reload&&location.reload()},secToHou:function(e){var t=Math.floor(e),i=Math.floor(t/3600),a=Math.floor((t-3600*i)/60),n=t-3600*i-60*a;return{hour:i,minute:a,second:n}},formatAxis:function(e){var i=[];return s.locale(t.get("moment")),n.forEach(e,function(e){if(/^(\d{4})(\d{2})(\d{2})(\d{2})?$/.test(e)){if(RegExp.$4)var t=s(RegExp.$2+"/"+RegExp.$3+" "+RegExp.$4+":00","MM/DD HH:mm").format("lll");else var t=s(RegExp.$2+"/"+RegExp.$3,"MM/DD").format("ll");i.push(t)}else i.push(/^(\d{2})$/.test(e)?RegExp.$1:e)}),i},getLength:function(e){for(var t=0,i=e.length,a=-1,n=0;i>n;n++)a=e.charCodeAt(n),t+=a>=0&&128>=a?1:3;return t},forceRender:function(){var e=document.body;e.style.cssText+=";-webkit-transform:rotateZ(0deg)",e.offsetHeight,e.style.cssText+=";-webkit-transform:none"},isImage:function(e){return e?/^image\//.test(e.type):!1},parseUrl:function(e){return/^(http|https):\/\//.test(e)?e:"https://"+e},strEllip:function(e,t){var i=e.length;if(t>=2*i)return e;t-=3;for(var a=0;i>a&&t>0;)escape(e.charAt(a)).length>4&&t--,t--,a++;return t>0?e:e.substring(0,a)+"..."},ParseError:function(e,t,n,o,s){if(!e||!n||!t)return i.error(a.i18n("error"));try{var r="{"!=e.responseText.charAt(0)?e:JSON.parse(e.responseText);if(r&&(r.errorCode||r.status)){r.errorCode=r.errorCode?r.errorCode:r.status;var l=t+"."+n+"."+r.errorCode,c=t+".error";400!=e.status&&(r.errorMessage="Sever Error  "+r.errorCode),"function"==typeof o?o(e,s):o&&r.errorCode in o?o[r.errorCode](e,s):o&&o["default"]?o["default"](e,s):i.error(a.i18n(l)?a.i18n(l):r.errorMessage?r.errorMessage:a.i18n(c))}else i.error(text)}catch(d){i.error(a.i18n("error"))}},goTo:function(e,t,i){window.location.hash=e+(t?"/"+t:"")+(i?"/"+i:"")},navigateTo:function(t,i,a){e.Router.navigate(t+(i?"/"+i:"")+(a?"/"+a:""))},normalize:function(e){var t={ios:"iOS",android:"Android","app store":"App Store","google play":"Google Play"};return t[e.toLowerCase()]||e},parseCurrentUrl:function(){var e={origin:window.location.origin,pathname:window.location.pathname,module:"dashboard",appId:"",hash:window.location.hash,url:window.location.href},t=e.pathname.match(/^(.*?)\/(\w+)\/?/);t&&t.length>2&&(e.module=t[2]);var i=e.pathname.match(/\/apps\/(\w+)/);return i&&i.length>1&&(e.appId=i[1]),""==e.appId||/\/apps\/(\w+)/.test(window.location.href)||(e.url=e.url.replace(e.module,e.module+"/apps/"+e.appId)),e},getCreditCardFullType:function(e){var t=!1;return/^5[1-5][0-9]{14}$/.test(e)?t="MasterCard":/^4[0-9]{12}(?:[0-9]{3})?$/.test(e)?t="Visa":/^3[47][0-9]{13}$/.test(e)?t="American Express":/^(?:2131|1800|35\d{3})\d{11}$/.test(e)?t="JCB":/^3(?:0[0-5]|[68][0-9])[0-9]{11}$/.test(e)?t="Diners Club":/^6(?:011|5[0-9]{2})[0-9]{12}$/.test(e)&&(t="Discover"),t},getCreditCardType:function(e){var t=!1;return/^5[1-5]/.test(e)?t="mastercard":/^4/.test(e)?t="visa":/^3[47]/.test(e)?t="ae":/^(?:2131|1800|35)/.test(e)?t="jcb":/^3(?:0[0-5]|[68])/.test(e)?t="dinner":/^6(?:011|5)/.test(e)&&(t="discover"),t},getPixelRatio:function(e){var t=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(Math.round(window.devicePixelRatio)||1)/t}}}),define("C",["config/App","config/User","config/Ajax","config/UI","config/Filter","U"],function(e,t,i,a,n,o){function s(e,t,i){return"undefined"==typeof e[t[i]]?!1:"undefined"!=typeof t[i+1]?s(e[t[i]]||{},t,i+1):e[t[i]]}function r(e,t,i,a){return"undefined"==typeof e[i[a]]&&(e[i[a]]={}),"undefined"==typeof i[a+1]?(e[i[a]]=t,t):void r(e[i[a]]||{},t,i,a+1)}var l={App:e,Ajax:i,User:t,UI:a,Filter:n},c={};return c.set=function(e,t){var i=e.split(".");return r(l,t,i,0)},c.get=function(e,t){var i=e.split("."),a=s(l,i,0);return t?o.Clone(a):a},c}),define("core/functions/LayoutRender",["underscore"],function(e){var t={};return t.render=function(t){e.forEach(t,function(t,i){var a=t.constructor;if(!a.create)throw new Error("Illegal Layout!!");var n=a.create({action:i,root:t.root,stateRoot:t.stateRoot,defaultState:t.defaultState,template:t.template,store:t.store,stay:t.stay});n.render(),e.forEach(t.state,function(e,t){n.addState(t,e)})})},t}),define("API",["C","U"],function(e){var t={},i=document.location.protocol+"//"+document.location.hostname+(document.location.port?":"+document.location.port:""),a="2.0",n={App:i+"/"+a+"/apps",Data:i+"/"+a+"/",Class:i+"/"+a+"/classes",User:i+"/"+a+"/users",Product:i+"/"+a+"/products",Passport:i+"/"+a+"/passport",Installation:i+"/"+a+"/installations",Role:i+"/"+a+"/roles",OrgUsers:i+"/"+a+"/orgUsers",Users:i+"/"+a+"/",Files:i+"/"+a+"/files",Schema:i+"/"+a+"/schemas",Country:i+"/"+a+"/location/country",Lang:i+"/"+a+"/location/lang",captcha:i+"/"+a+"/captcha/",Email:i+"/"+a+"/",DataIE:i+"/"+a+"/dataie",Pay:i+"/"+a+"/pay",SMS:i+"/"+a+"/sms"},o={EmailTpl:function(){return"apps/"+e.get("User.AppId")+"/emailtemplates"},SingleApp:function(){return"apps/"+e.get("User.AppId")},Schema:function(){return"/schemas/"},Batch:function(){return"/batch/"},Installation:function(){return"/_Installation"},register:function(){return"/register"},requestPasswordReset:function(){return"/requestPasswordReset"},requestEmailVerify:function(){return"/requestEmailVerify"},verifyEmail:function(){return"/verifyEmail"},resetPassword:function(){return"/resetPassword"}};return t.get=function(e){var t=e.split("."),i=n[t[0]];return t[1]?o[t[1]]?i+o[t[1]]():i+"/"+t[1].toLowerCase():i},t}),define("core/functions/StoreLoader",["app","API","underscore"],function(e,t,i){var a={};return a.load=function(a){i.forEach(a,function(a){var n=a.name;if(!e.DataRepository.getStore(n)){var o,s=a.constructor.create({name:a.name,generator:a.generator,usePool:a.usePool||!1});i.forEach(a.state,function(e,t){s.addState(t,e)}),a.task?(a.taskOptions&&(a.taskOptions.url=t.get(a.taskOptions.url),a.taskOptions.queryUrl&&(a.taskOptions.queryUrl=t.get(a.taskOptions.queryUrl))),o=a.task.create(a.taskOptions||{})):o=a.data||{},s.setData(o),a.initialize&&s.refreshData()}})},a}),define("dispatcher",["U","underscore","backbone"],function(e,t,i){var a={};a.on=function(e,t,a,n){var o,s=e.split(".");switch(o=s.length>1?s[0]:"Event"){case"Event":i.Wreqr.radio.channel(n||"global").vent.on(s[1]||s[0],t,a);break;case"Command":i.Wreqr.radio.channel(n||"global").commands.setHandler(s[1],t,a);break;case"Request":i.Wreqr.radio.channel(n||"global").reqres.setHandler(s[1],t,a);break;default:throw new Error("None support Message Type")}};var n=function(e,t){var a,n=t.split(".");switch(a=n.length>1?n[0]:"Event"){case"Event":i.Wreqr.radio.channel(e||"global").vent.off(n[1]||n[0]);break;case"Command":i.Wreqr.radio.channel(e||"global").commands.removeHandler(n[1]);break;case"Request":i.Wreqr.radio.channel(e||"global").reqres.removeHandler(n[1]);break;default:throw new Error("None support Message Type")}};return a.off=function(e,i){t.isArray(i)?t.forEach(i,function(t){n(t,e)}):n(i||"global",e)},a.execute=function(e,a,n){t.isArray(n)?t.forEach(n,function(t){i.Wreqr.radio.channel(t).commands.execute(e,a)}):i.Wreqr.radio.channel(n||"global").commands.execute(e,a)},a.trigger=function(e,a,n){t.isArray(n)?t.forEach(n,function(t){i.Wreqr.radio.channel(t).vent.trigger(e,a)}):i.Wreqr.radio.channel(n||"global").vent.trigger(e,a)},a.request=function(e,t,a){return i.Wreqr.radio.channel(a||"global").reqres.request(e,t)},a}),define("core/functions/UI",["app","dispatcher","U","C","language","i18n","Logger","jquery","underscore","Storage","semanticui_modal","API","semanticui_checkbox"],function(e,t,i,a,n,o,s,r,l,c,d,u){window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(){return-1}}(),window.cancelRequestAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||function(){return-1}}();var p=null;return{showDialog:function(e,i,a){a=a||{},a=r.extend({specialDialogUI:"",btns:{negative:"common.form.cancel",positive:"common.form.apply",others:[]}},a);var n=a.el||r("#app-dialog");n.attr("special-dialog-ui",a.specialDialogUI),n.parent().removeClass("hidden"),n.removeClass("hidden"),n.removeClass("small medium large x-large"),a.size&&n.addClass(a.size);var s=n.find(".header");s.html(e);var c=n.find(".actions");c.html(""),0!=a.footer&&(a.btns.negative&&""!=a.btns.negative&&c.append('<div class="ui button negative">'+o.t(a.btns.negative)+"</div>"),a.btns.positive&&""!=a.btns.positive&&c.append('<div class="ui button primary positive">'+o.t(a.btns.positive)+"</div>"),l.each(a.btns.others,function(e){if("string"==typeof e)c.append('<div class="ui primary button">'+o.t(e)+"</div>");else if("object"==typeof e){var i=o.t(e.name),a=e.className||"",n=r('<div class="ui button">'+i+"</div>");n.addClass(a),e.icon&&n.prepend('<i class="icon '+e.icon+'"></i>'),e.onClick&&n.bind("click",function(){t.trigger("click:"+e.onClick,{},"Component")}),c.append(n)}}));var d=n.find(".content");if(0==d.length&&(s.after('<div class="content"></div>'),d=n.find(".content")),"string"==typeof i)d.html(i);else{var u=new i(l.extend({},{el:n.find(".content")},a));n.data("dialog-view",u),u.init&&u.init(),u.beforeShow&&u.beforeShow(),u.render(a),u.$(".ui.checkbox").length>0&&u.$(".ui.checkbox").checkbox()}var p=l.pick(a,["closable","useCss","transition","duration","easing","allowMultiple","observeChanges","onVisible","onHidden","options"]);p.transition=p.transition||"scale",0==a.closable?(p.closable=!1,n.children(".icon.close").hide()):n.children(".icon.close").show(),p.onApprove=function(){return a&&a.success&&a.success(n.data("dialog-view")),!1},p.onDeny=function(){a&&a.error&&a.error(n.data("dialog-view"))},p.onHidden=function(){n.removeAttr("special-dialog-ui");var e=n.data("dialog-view");e&&(e.$(".ui.checkbox").length>0&&e.$(".ui.checkbox").checkbox("destroy"),e.beforeHide&&e.beforeHide(),e.destroy(),n.data("dialog-view",null)),n.removeClass("hidden"),r(document).off("keyup.dialog")};var m=function(){r(document).on("keyup.dialog",function(e){13==(e.keyCode||e.which)&&p.onApprove()})};if(p.onVisible){var f=p.onVisible;p.onVisible=function(e){f(e),m()}}else p.onVisible=m;a.autofocus||(p.autofocus=!1),n.modal(p).modal("show")},hideDialog:function(e){e=e||{},e.el?e.el.modal("hide").removeClass("hidden"):r("#app-dialog").modal("hide").removeClass("hidden")},bindUploader:function(e,t,a){e.each(function(e,n){var o=r('<input type="file" style="display:none" />').insertAfter(r(n));r(n).on("click",function(){o.trigger("click")}),o.change(t?function(e){var n=new FileReader,o=r(this).get(0).files[0]||{type:""};i.isImage(o)&&(n.readAsDataURL(o),n.onloadend=function(e){r(t).css("opacity",1),r(t).css("background-repeat","no-repeat"),r(t).css("background-image","url("+e.target.result+")")}),a&&a(e)}:function(e){a&&a(e)})})},removeStatus:function(e){r(e).closest(".field").removeClass("success error"),r(e).closest(".field").children(".error-msg").remove()},toggleSuccess:function(e){this.removeStatus(e)},toggleError:function(e,t){this.removeStatus(e),e.closest(".field").addClass("error"),this._showMessage(e,t)},_showMessage:function(e,t){r(e).hasClass("logger-msg")?s.error(o.t(t)):0==r(e).siblings(".error-msg").length?r(e).closest(".field").append('<span class="error-msg"><i class="warning circle icon"></i>'+o.t(t)+"</span>"):r(e).siblings(".error-msg").text(o.t(t))},_visible:function(e){return document.body.scrollTop<e.offset().top},createCaptcha:function(e){function t(){r("body").delegate("#captcha_img","click",function(){var e=r(this);e.attr("src","").css("background","url(images/ajax_loader_mini.gif) no-repeat center center"),i()})}function i(){var t=Math.random();r.ajax({url:u.get("captcha.secret"),type:"get",data:{_:t},dataType:"json"}).done(function(t,i,a){var n=a.getResponseHeader("X-LAS-SECRET");e.find("#captcha_img").attr("src",u.get("captcha")+"?secret="+n).data("HEADER_SECRET",n)}).fail(function(){e.find("#captcha_img").attr("src",""),s.error("prelogin.error.get-captcha",{doI18n:!0})}).always(function(){e.find(".captcha-warpper").show().end().find(".default-text").hide()})}if(e)return i(),t(),{getCaptchaValue:function(){return r("#captcha").val()},getCaptchaHeaderSecret:function(){return r("#captcha_img").data("HEADER_SECRET")},refresh:function(){r("#captcha_img").click()}}},initIconProgress:function(e){var t=r(e).get(0),i=t.getContext("2d");i.save(),i.fillStyle="#000000",i.fillRect(0,0,174,174),i.restore()},startUploadIcon:function(e){var t=r(e).get(0),i=t.getContext("2d");i.save(),i.beginPath(),i.arc(87,87,80,0,2*Math.PI),i.closePath(),i.clip(),i.clearRect(0,0,174,174),i.restore(),this.progressIcon(e,0)},progressIcon:function(e,t){var i=this,a=r(e).data("percent")||0;p&&cancelRequestAnimationFrame(p),i.progressAnimation(e,a,t)},progressAnimation:function(e,t,i){var a=this;t>i&&(t=i);var n=r(e).get(0),o=n.getContext("2d");o.save(),o.beginPath(),o.arc(87,87,80,0,2*Math.PI),o.closePath(),o.clip(),o.clearRect(0,0,174,174),o.restore(),o.fillStyle="#000000",o.beginPath(),o.arc(87,87,80,0,2*Math.PI),o.closePath(),o.stroke(),o.beginPath(),0==t?o.arc(87,87,60,0,2*Math.PI,!0):o.arc(87,87,60,1.5*Math.PI,Math.PI*(2*t/100+1.5),!0),o.lineTo(87,87),o.closePath(),o.fill(),o.restore(),r(e).data("percent",t),i>t?requestAnimationFrame(function(){a.progressAnimation(e,t+1,i)}):100==t&&a.completeIcon(e)},completeIcon:function(e){function t(){n+=2,n>130&&(n=130),a.save(),a.beginPath(),a.arc(87,87,n,0,2*Math.PI),a.closePath(),a.clip(),a.clearRect(0,0,174,174),a.restore(),130>n?requestAnimationFrame(t):r(e).remove()}var i=r(e).get(0),a=i.getContext("2d");p&&cancelRequestAnimationFrame(p);var n=80;requestAnimationFrame(t)},setIntroProps:function(e){r.each(e,function(e,t){t=r.extend(t,{"data-selector":e}),r(e).attr(t)})},initTooltips:function(){r("body").delegate("[data-sem-key]","mouseenter",function(e){r(e.currentTarget).popup(r.extend({},a.get("UI.Popup"),{offset:-10,html:n.i18n(r(e.currentTarget).attr("data-sem-key"))}))})},initScreenNotification:function(){var e=860,t=r("#screen-notification");r(window).bind("resize",function(){r(window).width()<e?t.show():t.hide()
}).trigger("resize")},bindLogout:function(){r(".logout").unbind("click.logout").bind("click.logout",function(){e.User.logout()})}}}),define("basic/Object",["underscore"],function(e){function t(){}function i(t,i){var a,n=this;a=t&&e.has(t,"constructor")?t.constructor:function(){return n.apply(this,arguments)},e.extend(a,n,i);var o=function(){this.constructor=a};return o.prototype=n.prototype,a.prototype=new o,t&&e.extend(a.prototype,t),a.__super__=n.prototype,a}return t.create=function(e){var i=new t;return 0==i.initialize(e)?!1:i},t.extend=i,t.prototype.initialize=function(t){return t||(t={}),e.extend(this,t),!0},t.prototype.get=function(e){if(!e)throw new Error("CObject: method get need argument key");return this[e]},t.prototype.set=function(e,t){if(!e)throw new Error("CObject: method set need arguments key");return this[e]=t,this},t.prototype.destroy=function(){return delete this},t}),define("Cookie",[],function(){return{get:function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=t?JSON.parse(decodeURI(t[2])):null},set:function(e,t,i,a){var n=new Date;n.setTime(n.getTime()+24*("undefined"==typeof i?1:i)*60*60*1e3),document.cookie=e+"="+encodeURI(t)+";expires="+n.toGMTString()+";path="+a||"/"},remove:function(e){this.set(e,"",-1)},clear:function(){var e=document.cookie.match(/[^ =;]+(?=\=)/g);if(e)for(var t=e.length;t--;)document.cookie=e[t]+"=0;domain="+window.location.hostname+";path=/;expires="+new Date(0).toUTCString()}}}),define("other/Account",["basic/Object","Cookie","Storage","C","U","jquery","underscore","i18n","semanticui_dropdown"],function(e,t,i,a,n,o,s){var r=[],l=e.extend({initialize:function(e){return this._configure(e),this.syncAccountInfo(),!0},_configure:function(e){this.options&&(e=s.extend({},s.result(this,"options"),e)),this.options=s.pick(e,r)},syncAccountInfo:function(){this.set("username",i.get("username")),this.set("email",i.get("email")),this.set("userType",i.get("userType")),this.set("roleType",i.get("roleType")),/(\w+\.)?(\w+)\./.test(window.location.hostname);var e=RegExp.$1;this.set("userId",t.get(e+"userId")||i.get("userId"))},clearUserData:function(){var e=i.get("lastUrl"),a=i.get("vistedIntrosSelector");i.clear(),t.clear(),e&&i.set("lastUrl",e),a&&i.set("vistedIntrosSelector",a)},logout:function(){this.clearUserData(),n.jumpTo("/login")},renderUserInfo:function(){this.username||this.email||"";o("#user-menu").i18n(),o("#user-menu").dropdown({duration:100,action:"select",onChange:function(e,t,i){console.log(i),console.log(i.find("a")[0]),i.find("a")[0].click()}})},destroy:function(){}});return l.create=function(e){var t=new l;return 0==t.initialize(e)?!1:t},l}),define("other/StateMachine",["basic/Object"],function(e){var t=e.extend({initialize:function(){return this._state={},this._callback={},!0},register:function(e,t,i,a){this._state[e]||(this._state[e]={}),this._state[e][t]=i,this._callback[e]||(this._callback[e]={}),this._callback[e][t]=a},execute:function(e,t){if(!(this.currentState&&this._callback[this.currentState]&&this._state[this.currentState]&&this._state[this.currentState][e]))return!1;var i=this._callback[this.currentState][e];return this.currentState=this._state[this.currentState][e],i?i(t):!1},setState:function(e){this.currentState=e}}),i=new t;return 0==i.initialize()?!1:i}),define("data/Task",["basic/Object","API","Logger","C","Q","jquery","underscore","pace"],function(e,t,i,a,n,o,s,r){var l=["params","method","header","url","timeout","formatter","buffer","next","queryUrl","extractUrl"],c=0,d=1,u=2,p=3,m=e.extend({initialize:function(e){return this._configure(e),this.result={},this.state=c,this.defer=n.defer(),!0},_configure:function(e){this.options&&(e=s.extend({},s.result(this,"options"),e)),this.options=s.pick(e,l)},start:function(){var e,l=this;if(this.state==d)return this.defer.promise;(this.state==u||this.state==p)&&(this.defer=n.defer());var c=this.options.method||"GET",m=this.options.params,f=this.options.url||"";this.options.extractUrl&&(f=t.get(f));var h=this.options.timeout||a.get("Ajax.TIMEOUT"),v=s.extend({},a.get("Ajax.HTTPHEADER"),this.options.header);this.options.queryUrl&&(c="POST",f=this.options.queryUrl);try{e="GET"==c.toUpperCase()?m:JSON.stringify(m)}catch(g){console.log("Task: params format error")}this.state=d,r.restart();var b=o.ajax({url:f,type:c,dataType:"json",contentType:"application/json",data:e,timeout:h,headers:v});return this._ajax=b,n(b).then(function(e){return l.state=u,e},function(e){return i.error(e,l.options),l.state=p,l.options.buffer?l.options.buffer:e.responseText}).then(function(e){if(l.options.formatter&&"function"==typeof l.options.formatter){var t=l.options.formatter(e,l.options);if(t&&n.isPromise(t))return void t.then(function(e){l.result=e,l.defer.resolve(l.result)},function(e){l.result=e,l.defer.resolve(l.result)}).fail(function(){});l.result=t}else l.result=e;l.defer.resolve(l.result)}).fail(function(){}),l.defer.promise},abort:function(){return this._ajax?this._ajax.abort():!1}});return m.create=function(e){var t=new m;return 0==t.initialize(e)?!1:t},m}),define("data/DataRepository",["Logger","basic/Object","data/Task","dispatcher","Q","jquery","underscore"],function(e,t,i,a,n,o,s){var r=[],l=t.extend({initialize:function(e){return this.isRunning=!1,this._configure(e),this._store_list={},!0},_configure:function(e){this.options&&(e=s.extend({},s.result(this,"options"),e)),this.options=s.pick(e,r)},start:function(){this.isRunning=!0},stop:function(){this.isRunning=!1},push:function(e,t){return this.isRunning?void(this._store_list[e]=t):!1},getStore:function(e){return"undefined"==typeof this._store_list[e]?!1:this._store_list[e]},remove:function(e){return"undefined"==typeof this._store_list[e]?!1:delete this._store_list[e]},fetch:function(e,t,i){if("undefined"==typeof this._store_list[e])throw new Error('DataRepository: "'+e+'" is not existed');var a=this._store_list[e];return"string"==typeof t?a.getState(t,i):a.getData()},fetchNew:function(e,t){if("undefined"==typeof this._store_list[e])throw new Error('DataRepository: "'+e+'" is not existed');var i=this._store_list[e];return i.refreshData(t,!0)},refresh:function(t,i){if("undefined"==typeof this._store_list[t])throw new Error('DataRepository: "'+t+'" is not existed');var o=this._store_list[t];try{var s=o.refreshData(i);s&&n.isPromise(s)&&s.done(function(e){console.log('refresh:"'+t+'"'),a.trigger("refresh:"+t,e,"Component")})}catch(r){e.error(r)}return s}});return l.create=function(e){var t=new l;return 0==t.initialize(e)?!1:t},l}),define("net/RequestPool",["basic/Object","jquery","underscore"],function(e,t,i){var a=[],n=e.extend({initialize:function(e){return this._configure(e),this._request_list={},!0},_configure:function(e){this.options&&(e=i.extend({},i.result(this,"options"),e)),this.options=i.pick(e,a)},push:function(e,t){"undefined"==typeof this._request_list[e]&&(this._request_list[e]=[]),this._request_list[e].push(t._ajax)},clear:function(e){e?this._request_list[e]=[]:this._request_list={}},abortByStoreName:function(e){this._request_list[e]&&this._request_list[e].length>0&&(i.forEach(this._request_list[e],function(e){e.abort()}),this._request_list[e]=[])}});return n.create=function(e){var t=new n;return 0==t.initialize(e)?!1:t},window.rp12=n.create(),rp12}),define("data/Store",["app","basic/Object","net/RequestPool","data/Task","U","Q","jquery","underscore"],function(e,t,i,a,n,o,s,r){var l=["generator","usePool","name"],c=1,d=2,u=3,p=t.extend({initialize:function(e){return this._configure(e),this.QUEUE=!1,this._state_list={},this._resultStack=[],this._callbackStack=[],this._currentProgress=0,this.addDefaultState(),e.name&&this.register(e.name),!0},_configure:function(e){this.options&&(e=r.extend({},r.result(this,"options"),e)),this.options=r.pick(e,l)},register:function(t){e.DataRepository.push(t,this)},setData:function(e){var t={};e instanceof a?(t.data=e,t.type="task",e.state=d):(t.data=n.Clone(e),t.type="data"),this._origin_data=t},getTask:function(){var e=this._origin_data.type;return"task"==e?this._origin_data.data:!1},getData:function(){var e=o.defer(),t=this._origin_data.type;if("data"==t)e.resolve(n.Clone(this._origin_data.data));else{var i=this._origin_data.data,a=i.state;if(a==d||a==u)e.resolve(n.Clone(i.result));else{if(a==c)return i.defer.promise;e.reject(new Error("Store: unknown error"))}}return e.promise},addState:function(e,t){this._state_list[e]=t},addDefaultState:function(){this.addState("default",function(e){return e})},getState:function(e,t){if("undefined"==typeof this._state_list[e])throw new Error('State: "'+e+'" is not defined');var i=o.defer(),a=this._state_list[e];return this.getData().done(function(e){var o=a(n.Clone(e),t);o&&o.done?o.done(function(e){i.resolve(e)}):i.resolve(o)}),i.promise},refreshData:function(e,t){var n=this,s=this._origin_data.type;if("data"==s){var l=o.defer();return l.resolve(this._origin_data.data),l.promise}var p=this._origin_data.data,m=this.options.generator?this.options.generator(e||{},p.options):e||{},f=r.extend({},p.options,m),h=p.state;if(t){var v=a.create(f),g=v.start();return this.options.usePool&&i.push(this.options.name,v),g}if(h==c||1==this.QUEUE){if(this.checkEqual(f,p.options)&&0==this.QUEUE)return console.log("equal return same"),!1;console.log("unequal start new"),this.QUEUE=!0,0==this._callbackStack.length&&(this.MAIN_TASK=!1,p.defer.promise.done(function(){n.MAIN_TASK=!0;var e=0;for(console.log("main task clear: T");"undefined"!=typeof n._resultStack[e];)console.log("task call"+e),n._origin_data.data._configure(n._resultStack[e].options),n._origin_data.data.result=n._resultStack[e].result,n._callbackStack[e].resolve(n._resultStack[e].result),n._callbackStack[e]=void 0,e++}));var b=o.defer();b.index=this._callbackStack.length,this._callbackStack.push(b);var y=a.create(f);return y.start().done(function(){console.log("sub task clear:"+b.index),n._currentProgress++,n._resultStack[b.index]=y,n._currentProgress==n._callbackStack.length&&n.MAIN_TASK&&(n._currentProgress=0,r.forEach(n._callbackStack,function(e,t){e&&(console.log("task call"+t),n._origin_data.data._configure(n._resultStack[t].options),n._origin_data.data.result=n._resultStack[t].result,e.resolve(n._resultStack[t].result))}),n._callbackStack=[],n._resultStack=[],n.QUEUE=!1)}),this.options.usePool&&i.push(this.options.name,y),b.promise}if(h==d||h==u){p._configure(f);var _=p.start();return this.options.usePool&&i.push(this.options.name,p),_}},checkEqual:function(e,t){return r.isEqual(e.params,t.params)&&e.method==t.method&&e.url==t.url}});return p.create=function(e){var t=new p;return 0==t.initialize(e||{})?!1:t},p}),define("store/RestStore",["data/Store","data/Task","Q","underscore"],function(e,t,i,a){var n=e.extend({getDataById:function(e,n){var o,n=n||"objectId",s=this._origin_data.data,r=i.defer(),l=this._origin_data.type;if("data"==l)o=a.find(s,function(t){return t[n]==e}),r.resolve(o);else if(o=a.find(s.result,function(t){return t[n]==e}))r.resolve(o);else{var c=s.options.url+"/"+e;t.create({url:c}).start().done(function(e){r.resolve(e)})}return r.promise},addData:function(e){var a=this._origin_data.data,n=i.defer(),o=this._origin_data.type;if("data"==o)throw new Error('RestStore: "add" static data to be implement');var s=t.create({url:a.options.url,method:"post",params:e});return s.start().done(function(e){3!=s.state?n.resolve(e):n.reject(e)}),n.promise},deleteData:function(e){var a=this._origin_data.data,n=i.defer(),o=this._origin_data.type;if("data"==o)throw new Error('RestStore: "delete" static data to be implement');var s=a.options.url+"/"+e,r=t.create({url:s,method:"delete"});return r.start().done(function(e){3!=r.state?n.resolve(e):n.reject(e)}),n.promise},updateData:function(e,n){var o=this._origin_data.data,s=i.defer(),r=this._origin_data.type;if("data"==r){var l=a.find(o,function(t){return t.id==e});a.extend(l,n),s.resolve(l)}else{var c=o.options.url+"/"+e,d=t.create({url:c,method:"put",params:n});d.start().done(function(e){3!=d.state?s.resolve(e):s.reject(e)})}return s.promise}});return n.create=function(e){var t=new n;return 0==t.initialize(e||{})?!1:t},n}),define("text!modules/common/AppList/template.html",[],function(){return'<div class="ui floating dropdown pointing left top button">\n    <span class="text">\n        <img class="ui mini avatar image" src="/images/appicon.svg">\n        <span data-i18n="common.title.choose-app"></span>\n    </span>\n    <i class="dropdown icon"></i>\n    <div class="menu">\n        <div class="ui icon search input">\n            <i class="search icon"></i>\n            <input type="text" name="search" data-i18n="[placeholder]common.placeholder.search">\n        </div>\n        <div class="scrolling menu"></div>\n        <div class="divider"></div>\n        <a class="item create-app" href="/createapp">\n            <i class="plus icon"></i>\n            <span data-i18n="common.title.create-app"></span>\n        </a>\n    </div>\n</div>'}),define("modules/common/AppList/view",["app","C","U","Storage","Logger","dispatcher","core/functions/UI","text!./template.html","marionette","jquery","underscore","i18n","semanticui_dropdown"],function(e,t,i,a,n,o,s,r,l,c,d,u){return l.ItemView.extend({template:d.template(r),events:{"click .scrolling>.item":"changeApp","keyup input":"changeAppByKey"},init:function(){var e=window.location.pathname,t="";/^\/(\w+)(\/?|\/apps\/\w+(\/)?)$/.test(e)&&(t=RegExp.$1);var i=this.options.storeName;this.childTemplate=d.template('            <div class="item" data-name="<%= name %>" data-value="<%= objectId %>" data-link="/'+t+'/apps/<%= objectId %>">                <img class="ui mini avatar image" src="<% if(metadata.icon){ %><%= metadata.icon %><% }else{ %>/images/appicon.svg<% } %>">                <span><%= name %></span>            </div>'),o.on("refresh:"+i,this.renderComponent,this,"Component")},beforeShow:function(){var e=this.options.valueEventName;o.on("Request.getValue:"+e,this.getValue,this,"Component")},beforeHide:function(){var e=this.options.valueEventName;o.off("Request.getValue:"+e,"Component"),this.$(".ui.dropdown").each(function(e,t){c(t).data("moduleDropdown")&&c(t).dropdown("destroy")})},changeAppByKey:function(e){if(13==e.keyCode){var t=c(".scrolling>.item.selected").attr("data-link");i.jumpTo(t)}},changeApp:function(e){if(!c(e.currentTarget).hasClass("disabled")){var t=c(e.currentTarget).attr("data-link");i.jumpTo(t)}},renderDropdown:function(e){var i=[],a=this.childTemplate;d.forEach(e,function(e){i.push(c(a(e)))}),this.$(".scrolling").html(i),this.$el.i18n(),this.$(".ui.dropdown").dropdown({message:{noResults:u.t("common.title.not-found")}});var n=t.get("User.AppId");if(n){var o=d.find(e,function(e){return e.objectId==n});if(o){var s=o.metadata||{},r=s.icon||"/images/appicon.svg";this.setValue(n,o.name,r)}}},renderComponent:function(){var t=this,i=this.options.storeName,a=this.options.stateName;e.DataRepository.fetch(i,a).done(function(e){t.renderDropdown(e)})},render:function(){l.ItemView.prototype.render.call(this),this.renderComponent()},refresh:function(){var t=this.options.storeName;e.DataRepository.refresh(t)},setValue:function(e,t,i){this.$(".ui.dropdown").data("moduleDropdown")||this.$(".ui.dropdown").dropdown(),this.$(".ui.dropdown").dropdown("set text",'<img class="ui mini avatar image" src="'+i+'"><span>'+t+"</span>"),this.$(".ui.dropdown").dropdown("set value",e)},getValue:function(){return this.$(".ui.dropdown").dropdown("get value")}})}),define("tpl!modules/common/NotificationBar/template.html",function(){return function(obj){var __p=[];with(obj||{})__p.push('<a class="toggle-notification" href="javascript:void(0)">    <span class="badge">0</span>    <span class="icomoon icomoon-bell2"></span></a><div class="notification-dropdown" style="display:none">    <div class="ui breadcrumb" style="display: block!important;border-bottom: 0"></div>    <div class="notification-dropdown-content">        <ul class="notification-body">        </ul>        <div class="notification-empty-view">            <div class="notification-empty-view-icon"></div>            <div class="notification-empty-view-text"><span data-i18n="notification.content.nodata"></span></div>        </div>    </div>    <div class="notification-status">        <div class="ui button btn-refresh pull-left">        </div>        <span class="tip-updated" data-i18n="common.tip.update"></span>        <span class="tip-loading" data-i18n="common.tip.loading" style="display: none"></span>    </div></div>');return __p.join("")}}),define("tpl!modules/common/NotificationBar/childTemplate.html",function(){return function(obj){var __p=[];with(obj||{})__p.push('<li class="message">    <a href="/issues#issue/',objectId,'">        <div class="app-icon app-icon-head pull-left"></div>        <div class="pull-right">            <span class="from pull-left">',author,'</span>            <time class="pull-right">',time,'</time>        </div>        <span class="title pull-left" style="margin-left:18px;">',title,"</span>    </a></li>");return __p.join("")}}),define("modules/common/NotificationBar/view",["app","dispatcher","tpl!./template.html","tpl!./childTemplate.html","marionette","jquery","underscore","moment","nicescroll"],function(e,t,i,a,n,o){return n.ItemView.extend({template:i,childTemplate:a,events:{"click .toggle-notification":"toggleDisplay","click .notification-body>li":"toggleClose","click .ui.breadcrumb>.section":"toggleType",click:"cancelClick","click .btn-refresh":"refresh"},init:function(){},beforeShow:function(){},cancelClick:function(e){e.stopPropagation()},toggleClose:function(e){var t=this;this.$(".notification-dropdown").removeClass("open"),this.$(".notification-dropdown").stop(!0,!0).animate({opacity:0},200,"linear",function(){t.$(".notification-dropdown").css("transform","rotateY(180deg)").hide()}),o("body").unbind("click.notification"),e&&e.stopPropagation()},toggleShow:function(e){var t=this;o(".dropdown").removeClass("open"),this.$(".notification-dropdown").addClass("open"),this.$(".notification-dropdown").show(),this.$(".notification-dropdown").stop(!0,!0).animate({opacity:1},{duration:200,step:function(e){o(this).css({transform:"rotateY("+180*(1-e)+"deg)",opacity:e}),t.scrollContent.resize()}}),o("body").unbind("click.notification").bind("click.notification",function(){t.toggleClose()}),e&&e.stopPropagation()},toggleType:function(e){this.type=o(e.currentTarget).attr("data-value"),this.$(".ui.breadcrumb>.section").removeClass("active"),o(e.currentTarget).addClass("active"),this.renderComponent(),e.stopPropagation()},toggleDisplay:function(e){this.$(".notification-dropdown").hasClass("open")?this.toggleClose():this.toggleShow(),e.stopPropagation()},render:function(){n.ItemView.prototype.render.call(this),this.type="msgs",this.scrollContent=this.$(".notification-dropdown-content").niceScroll(),this.refresh()},renderComponent:function(){this.$(".btn-refresh").removeClass("loading"),this.$(".tip-updated, .tip-loading").toggle();var t=this.options.storeName,i=this;e.DataRepository.fetch(t,this.type).done(function(e){i.renderNotificationMsg(e)})},renderNotificationMsg:function(){var e=this;this.refreshTask&&clearTimeout(this.refreshTask),setTimeout(function(){e.refresh()},this.options.refreshInterval||18e4)},refresh:function(){var t=this.options.storeName;e.DataRepository.refresh(t)},beforeHide:function(){}})}),define("Timezone",["jquery","underscore","C","moment","moment-timezone"],function(e,t,i,a){var n={default_format:"llll",default_server_timezone_offset:"0",timezones:{0:"Greenwich",7:"Asia/Bangkok",8:"Asia/Shanghai"},init:function(){this.inited||(a.locale(i.get("moment")),this.timezone=this.getUserTimezone(),this.inited=!0)},getUserTimezone:function(){return i.get("User.Timezone")||"Asia/Shanghai"},getTimezoneOffsetByBrowser:function(){return-(new Date).getTimezoneOffset()/60},getTimezoneOffsetByString:function(e){return parseInt(a().tz(e).format("Z"))},getTimezoneOffset:function(e){return this.init(),e=e||this.timezone,this.getTimezoneOffsetByString(e)},convertTimestampToTimeByTimezone:function(e,t,i,n){if(e&&""!=e){n=n||this.default_format;var o=a.unix(e).format(n);return o}},convertByTimezone:function(e,t,i,n){if(e&&""!=e){this.init(),t=t||this.timezone,n=n||this.default_format;var o=a(e).tz(t),s=o.clone().tz(i).format(n);return s}},parseServerTime:function(e,t,i,a){this.init(),i=i||this.timezone,t=t||this.default_server_timezone_offset;var n=this.timezones[t];return this.convertByTimezone(e,n,i,a)},buildServerTime:function(e,t,i,a){this.init(),i=i||this.timezone,t=t||this.default_server_timezone_offset;var n=this.timezones[t];return this.convertByTimezone(e,i,n,a)},handlerTimeProperties:function(e,i,a){var n=this;e&&0!=e.length&&i&&0!=i.length&&(n.init(),a=a||{},a.server_timezone_offset=a.server_timezone_offset||n.default_server_timezone_offset,a.user_timezone=a.user_timezone||n.timezone,a.format=a.format||n.default_format,t.each(e,function(e){t.each(i,function(i){t.has(e,i)&&(e[i]=n.parseServerTime(e[i],a.server_timezone_offset,a.user_timezone,a.format))})}))},handlerTimePropertiesNoFormat:function(e,i){e&&0!=e.length&&i&&0!=i.length&&t.each(e,function(e){t.each(i,function(i){t.has(e,i)&&(e[i]=1e3*a.tz(e[i],"Greenwich").unix())})})},Convert2LocalTime:function(t,i){if(!e.isNumeric(t))throw new Error("must be timestamp");var n=a.tz(t,"Greenwich"),o=n.clone().tz(this.getUserTimezone());return 0==i?o:"undefined"!=typeof i?o.format(i):1e3*o.unix()}};return n}),define("modules/common/Contact",["jquery","Logger","language"],function(e,t,i){"zh"===i.getCurLangCode()?(window.jsI18nData={formValidation:{user:{loginid:"请输入合法的邮箱",email:"请输入合法的邮箱",username:"用户名不能少于6位",password:"密码不能少于8位",name:"请输入公司名称",phone:"请输入合法电话号码",captcha:"请输入验证码","password-confirm":"请确认您的密码","password-same":"两次输入的密码必须相同"},contact:{email:"请输入合法的邮箱",message:"请输入您的反馈信息"}},aboutus:{"send-success":"谢谢您的反馈，我们已经收到您的信息，会尽快与您联系。","send-fail":"发送失败，请稍后再试。"},updatebrowser:"为了您极致的体验，请使用IE11或其他现代浏览器。","get-captcha-error":"获取验证码失败，请稍后重试。","server-error":"服务器异常，请稍后重试。","signout-success":"注销成功"},window.jsI18nData.module={analytics:"分析",segments:"用户群细分",clouddata:"云数据",cloudconfig:"云配置",cloudcode:"云代码",push:"推送",support:"支持",gamemaster:"管理",devcenter:"开发者中心",dashboard:"概况",marketing:"营销推广",appsettings:"设置",gamesettings:"设置",users:"用户",createapp:"创建应用程序",creategame:"创建应用程序"},e(".side-contact-article-en").remove()):(window.jsI18nData={formValidation:{user:{loginid:"Please enter a valid email",email:"Please enter a valid email",username:"User name cannot less than 6",password:"Password cannot less than 8",name:"Please enter orgnization name",phone:"Please input a valid number",captcha:"Please input a valid captcha","password-confirm":"Please confirm your password","password-same":"Two passwords must be the same"},contact:{email:"Please enter a valid email",message:"Please enter your message"}},aboutus:{"send-success":"Thanks for contacting us. We have received your message. Our support will get back to you as soon as possible.","send-fail":"Send fail, please try again latter."},updatebrowser:"In order to make your experience excellent, please use IE11 or other modern browsers.","get-captcha-error":"Get captcha fail, please try later.","server-error":"Server error.","signout-success":"Sign out success"},window.jsI18nData.module={analytics:"Analytics",segments:"Segments",clouddata:"Cloud Data",cloudconfig:"Cloud Config",cloudcode:"Cloud Code",push:"Push",support:"Support",gamemaster:"Master",devcenter:"Dev Center",dashboard:"Dashboard",marketing:"Marketing",appsettings:"Settings",gamesettings:"Settings",users:"Users",createapp:"Create App",creategame:"Create App"},e(".side-contact-article-zh").remove());var a={EMAIL:{SENDAPI:"/2.0/mails/sendmail",SENDTO:["support@leap.as"],DOMAIN:"mercury-browser.com"}},n=function(){function t(t,i,a){e(".validate_msg",t).remove(),t.removeClass("field-error"),a||(t.append('<div class="validate_msg"><i class="icomoon-attention-circled"></i>'+i+"</div>"),t.addClass("field-error"))}function i(i,a){var n=i.attr("name"),o=e.trim(i.val()),s=i.closest(".field"),r=!0,l="";if(s.hasClass("rpassword")){var c=e.trim(s.closest("form").find(".password input").val()),d=e.trim(i.val());""===d?(l=jsI18nData.formValidation.user["password-confirm"],r=!1):d!==c&&(l=jsI18nData.formValidation.user["password-same"],r=!1)}else{var u=a[n];if(void 0===u)return;l=u.msg;var p=u.rule;r="function"==typeof p?p(o):p.test(o)}t(s,l,r)}function a(t,a){return e("input, textarea",t).each(function(t,n){i(e(n),a)}),0===e(".field-error:visible",t).length?!0:!1}var n={from:{rule:function(e){return e.length?/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e):!0},msg:jsI18nData.formValidation.contact.email},text:{rule:function(e){return e.length>0},msg:jsI18nData.formValidation.contact.message}};return{contactFormRules:n,validateInput:i,validateForm:a}}(),o=function(){function i(){e(".close",r).bind("click",function(){r.slideOut()})}function o(){l.bind("click",function(){r.slideIn()}),s(e("form",r),e(".send-msg-btn",r)),i()}function s(i,o){i.delegate("input","keypress",function(e){return 13===e.keyCode?!1:void 0}),i.delegate("input, textarea","keyup",function(){n.validateInput(e(this),n.contactFormRules)}),o.bind("click",function(){var s=n.validateForm(i,n.contactFormRules),l={};s&&(e(i.serializeArray()).each(function(t,i){l[i.name]=e.trim(i.value)}),l=e.extend(l,{to:a.EMAIL.SENDTO,domain:a.EMAIL.DOMAIN}),l.from=l.from||"Anonymity",e.ajax({method:"POST",url:a.EMAIL.SENDAPI,data:JSON.stringify(l),contentType:"application/json",dataType:"json",beforeSend:function(){o.addClass("loading")},complete:function(){o.removeClass("loading"),r.slideOut()},success:function(){t.success(jsI18nData.aboutus["send-success"])},error:function(){t.error(jsI18nData.aboutus["send-fail"])}}))})}var r=e("#side-contact-article"),l=e("#side-contact-btn");return r.slideOut=function(){this.removeClass("visible")},r.slideIn=function(){this.addClass("visible")},{initContactBtn:o,initFormOp:s}}();o.initContactBtn()}),define("modules/common/bootstrapper",["app","language","dispatcher","core/functions/UI","other/Account","other/StateMachine","data/DataRepository","store/RestStore","data/Task","./AppList/view","./NotificationBar/view","API","U","C","Q","jquery","Storage","Cookie","underscore","moment","semanticui_popup","i18n","Timezone","./Contact"],function(e,t,i,a,n,o,s,r,l,c,d,u,p,m,f,h,v,g,b,y,_,w){function k(e){e&&(m.set("User.AppId",e),v.set("current_app_id",e))}function x(){if(!e.User)throw new Error("You should initialize Account first");e.User.logout()}function C(){var e=J.module;"dashboard"!=e&&p.jumpTo("/nopermission")}function S(t){e.User.set("permissions",["DASHBOARD","DEV_CENTER","SETTINGS","ORG_PROFILE"]),e.User.set("orgId",t.orgId),e.User.set("roles",t.roles),e.User.set("timezone",t.timezone),e.User.set("email",t.email),e.User.set("username",t.username),e.User.set("userType",t.userType),e.User.set("orgId",t.orgId),v.get("language")||v.set("language",t.language)}function T(){e.DataRepository.fetch("Store:UserProfile").done(function(e){if(e.orgId){S(e);var t=(J.module,!0);o.execute(t?"has_permission":"no_permission")}else o.execute("no_session_token")},function(){throw new Error("ServerError")})}function A(){var e=J.module,t=-1!=h.inArray(e,G)?"not_need_app_list":"need_app_list";o.execute(t)}function E(){var t=l.create({url:u.get("OrgUsers")+"/"+e.User.get("userId"),formatter:function(e){return e},method:"GET",buffer:{}}),i=l.create({url:u.get("App"),formatter:function(e){return b.isArray(e)?e.sort(function(e,t){return e.name>t.name?1:-1}):[]},method:"GET",buffer:[]}),a=r.create({name:"Store:AllAppList"});a.setData(i),a.refreshData();var n=r.create({name:"Store:UserProfile"});n.setData(t),n.refreshData()}function j(){}function I(){e.DataRepository.fetch("Store:AllAppList").done(function(e){o.execute("load_success",e)},function(){o.execute("load_fail"),O.reject()})}function $(e){if(h.isArray(e)&&e.length){var t,i=m.get("User.AppId");if(!(t=b.findWhere(e,{objectId:i}))){if(!e[0]||!e[0].objectId)throw new Error("Dirty Data in AppList");i=e[0].objectId,t=e[0]}m.set("User.AppIcon",t.metadata?t.metadata.icon:""),m.set("User.AppName",t.name?t.name:""),k(i),o.execute("in_app_list")}else o.execute("not_in_app_list")}function D(e){o.execute("can_create",e)}function R(){U(),e.User.renderUserInfo(),h("#main-sidebar,#header-nav,#main-container,#main-container>.sidebar").i18n(),a.initTooltips(),a.initScreenNotification(),a.bindLogout(),h("#common-loader").fadeOut(),O.resolve()}function L(){R();var e=new c({storeName:"Store:AllAppList"});e.init(),e.setElement(document.getElementById("app-selector")),e.beforeShow(),e.render()}function q(){L(),h("#app-selector .create-app").remove()}function N(){var t=J.module;"createapp"==t||"dashboard"==t&&2==e.User.get("userType")?C():(R(),h("#create_app").remove())}function P(){var e=J.module;v.set("pagebeforecreateapp",e),p.jumpTo("/createapp")}function z(){o.setState("EnterPage"),o.register("EnterPage","no_session_token","NotLogin",x),o.register("EnterPage","expire_session_token","NotLogin",x),o.register("EnterPage","has_session_token","Login",T),o.register("Login","no_session_token","NotLogin",x),o.register("Login","no_permission","NoPermission",C),o.register("Login","has_permission","HasPermission",A),o.register("HasPermission","need_app_list","StartLoadingList",I),o.register("HasPermission","not_need_app_list","NotNeedApp",D),o.register("NotNeedApp","can_create","StartPage",R),o.register("NotNeedApp","can_not_create","StartPage",N),o.register("StartLoadingList","load_success","LoadingComplete",D),o.register("StartLoadingList","load_fail","LoadingError",j),o.register("LoadingComplete","can_create","CanCreate",$),o.register("CanCreate","not_in_app_list","NoApp",P),o.register("CanCreate","in_app_list","StartPage",L),o.register("LoadingComplete","can_not_create","CanNotCreate",$),o.register("CanNotCreate","not_in_app_list","NoPermission",C),o.register("CanNotCreate","in_app_list","NoPermission",q)}function U(){var t=h("#module-menu .menu-content"),i=J.module,a=e.User.get("permissions"),n=[];if(b.forEach(Y,function(e){if(h.inArray(Z[e],a)>-1){var t=K[e]?K[e]:e,i=h('<li><a href="/'+e+'"><i class="icomoon '+H[e]+'"></i><span data-i18n="common.module.'+M(t)+'"></span></a></li>');if("userpermission"!=e&&"billing"!=e&&"orgprofile"!=e&&"subscription"!=e)n.push(i);else{var o='<div class="item"><a href="/'+e+'"><i class="'+V[e]+'"></i><span data-i18n="common.module.'+M(t)+'"></span></a></div>';h(o).insertBefore(h("#user-menu .profile"))}}}),"dashboard"==i){b.forEach(n,function(e,t){0!=e.find("a[href='/dashboard'],a[href='/userpermission'],a[href='/billing']").length&&(n[t]="")}),h('<ul class="app-list app-menu-items"></ul>').insertBefore(h("#create_app_warpper")).append(n);for(var o=8-h("ul.app-menu-items>li").length,s=0;o>s;s++)h("ul.app-menu-items").append('<li class="empty"></li>');h("#header-nav").append('<div class=" page-title">'+w.t("common.module.dashboard")+"</div>")}else h('<ul class="app-list app-menu-items"></ul>').appendTo(t).append(n);h("#module-menu>.icomoon-menu").on("click.appmenu",function(e){function i(){h(document).off("click.appmenu"),t.removeClass("active")}t.hasClass("active")?i():(t.addClass("active"),e.stopPropagation(),h(document).on("click.appmenu",i),h(document).on("click.appmenu","#module-menu",function(e){e.stopPropagation()}))})}function M(e){return"settings"==e?"app-settings":e}function B(){function e(){var e=p.parseCurrentUrl();e&&v.set("lastUrl",e)}var t=v.get("lastUrl");if(J&&""==J.hash&&t&&""!=t.hash&&""!=J.module&&J.module==t.module&&h.inArray(J.module.toLowerCase(),W)>-1){var i="";if(/^#(\w+)\//.test(t.hash)){var a=RegExp.$1;"analytics"==t.module&&"funnels"==a&&(a="conversions"),t.hash="#"+a}i=""!=J.appId?J.origin+"/"+J.module+"/apps/"+J.appId+"/"+t.hash:J.origin+"/"+J.module+t.hash,""!=i&&p.jumpTo(i)}else e(),window.onhashchange=function(){e()
}}function F(){var e=v.get("current_app_id"),t=v.get("moment");m.set("moment",t),e&&m.set("User.AppId",e),/(\w+\.)?(\w+)\./.test(window.location.hostname);var i=RegExp.$1,a=g.get(i+"sessionToken")||v.get("sessionToken");a&&m.set("User.SessionToken",a);var n=v.get("timezone");n&&m.set("User.Timezone",n);var o=window.location.pathname;/^\/\w+\/apps\/(\w+)(\/)?$/.test(o)&&k(RegExp.$1)}var O=f.defer(),Y=["clouddata","settings"],V={userpermission:"icomoon icomoon-useradm",orgprofile:"icomoon icomoon-orgprofile"},H={dashboard:"dashboard",clouddata:"icomoon-devcenter",settings:"icomoon-setting",profile:"icomoon-useri",orgprofile:"icomoon-orgprofile"},K={clouddata:"dev-center"},G=["dashboard","profile","createapp","product"],W=["settings"],Z={dashboard:"DASHBOARD",clouddata:"DEV_CENTER",settings:"SETTINGS",orgprofile:"ORG_PROFILE"},J=p.parseCurrentUrl();return{init:function(){return B(),e.DataRepository=s.create(),e.DataRepository.start(),e.User=n.create(),t.init(function(){var e=J.module,t=K[e]?K[e]:e;if(h("#main-toolbar>.module-name").html('<div class="group-name" data-i18n="common.module.'+M(t)+'"></div><div class="menu-name"></div>'),F(),z(),m.get("User.SessionToken")){var i=m.get("User.SessionToken");i&&m.set("Ajax.HTTPHEADER.X-LAS-Session-Token",i),E(),o.execute("has_session_token")}else o.execute("no_session_token");h("#main-sidebar>.list>a").click(function(e){var t=h(e.currentTarget).attr("data-value"),i=h("#main-container>.sidebar li[data-module="+t+"]");i.length&&(window.location.hash=i.eq(0).children("a").attr("href"))})}),O.promise}}}),define("basic/net/Uploader",["API","Logger","C","core/functions/UI","U","underscore","jquery"],function(e,t,i,a,n,o){var s={method:"PUT",urlRoot:e.get("Files"),onProgress:function(e){console.log(e)},onSuccess:function(){console.log("success")},onComplete:function(){console.log("complete")},onError:function(){console.log("error")},onAbort:function(){console.log("abort")}},r=function(e){var t=o.extend({},s,e);if(!t.urlRoot)throw new Error("Need URL to Upload");if(!t.$el)throw new Error("Need FileInputNode to Upload");this.options=t};return r.prototype.uploadFile=function(){function e(e){var t=0;e.lengthComputable&&(t=e.loaded/e.total,t>=.9&&(t=.9),a.onProgress&&a.onProgress(t))}var a=this.options,o=a.$el.get(0).files[0]||{type:""};if(a.checkImage&&!n.isImage(o))return t.error("illegal Image File"),!1;var s=new XMLHttpRequest;s.upload.addEventListener("progress",e,!1),s.upload.addEventListener("load",a.onComplete,!1),s.upload.addEventListener("error",a.onError,!1),s.upload.addEventListener("abort",a.onAbort,!1),s.onreadystatechange=function(){if(4==s.readyState){var e=s.response;200==s.status||201==s.status?(a.onProgress(1),a.onSuccess(e,s)):a.onError(s)}};var r=a.url?a.url:a.urlRoot+"/"+encodeURIComponent(o.name);if(s.open(a.method,r,!0),s.setRequestHeader("X-LAS-AppId",i.get("User.AppId")),s.setRequestHeader("X-LAS-Session-Token",i.get("User.SessionToken")),this.xhr=s,a.key){var l=new FormData;l.append(a.key,o),s.send(l)}else s.send(o)},r.prototype.stopUpload=function(){this.xhr&&0==this.xhr.status&&this.xhr.abort()},r}),define("tpl!modules/settings/general/deleteAppView/template.html",function(){return function(obj){var __p=[];with(obj||{})__p.push('<form class="ui form">    <div class="field">        <input type="password" data-i18n="[placeholder]common.placeholder.enter-password" name="password" autocomplete="off">    </div>    <p data-i18n="settings.tip.enter-password"></p></form>');return __p.join("")}}),define("config/validate",["jquery"],function(e){return{required:{msg:"error.format.required",validator:function(t){return e.trim(t)&&null!=typeof t}},appname:{regex:/^[a-zA-Z0-9]+[0-9a-zA-Z_-\s\u4e00-\u9fa5]{1,}$/,msg:"error.format.appname",rules:["required"]},columnname:{regex:/^[A-Za-z_][A-Za-z0-9_]*$/,msg:"error.format.columnname",rules:["required"]},targetclass:{msg:"error.local.targetclass",validator:function(e,t){var i=t.type,a=t.target;return!(("Pointer"==i||"Relation"==i)&&!a)}},eid:{regex:/^[A-Za-z][A-Za-z0-9]+$/,msg:"error.format.appname",rules:["required"]},url:{regex:/^((http|https):\/\/(.*))?$/,msg:"error.format.url"},urlpathAndNotEmpty:{msg:"error.format.urlpathAndNotEmpty",validator:function(t){var t=e.trim(t);return t.length<1?!1:/^(?!http:\/\/|https:\/\/|:\/\/)(.*)+$/.test(t)}},json:{msg:"error.format.json",validator:function(e){try{var t=/(^\{.*\}$)|(^\[(.*)\]$)/;if(!t.test(e))return!1;JSON.parse(e)}catch(i){return!1}return!0}},number:{msg:"error.format.number",validator:function(t){return""==t?!0:e.isNumeric(t)}},numberAndNotempty:{msg:"error.format.number",validator:function(t){return""==t?!1:e.isNumeric(t)}},latitude:{msg:"error.format.geo",rules:["required","number"],validator:function(e){return Math.abs(e)<=180}},longitude:{msg:"error.format.geo",rules:["required","number"],validator:function(e){return Math.abs(e)<=90}},email:{regex:/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,msg:"error.format.email"},phone:{regex:/^(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/,msg:"error.format.phone"},object:{msg:"error.format.object",validator:function(e){if(!/^\s*\{/.test(e))return!1;try{JSON.parse(e)}catch(t){return!1}return!0}},array:{msg:"error.format.array",validator:function(e){if(!/^\s*\[/.test(e))return!1;try{JSON.parse(e)}catch(t){return!1}return!0}},passwordconfirm:{msg:"error.local.passwordconfirm",rules:["required"],validator:function(t,i,a){return e.trim(t)===e.trim(a.password)}},nonemptyemail:{rules:["required","email"]},username:{msg:"error.format.username",validator:function(t){return e.trim(t).length>=6}},password:{msg:"error.format.password",validator:function(t){return e.trim(t).length>=8}},arrayrequired:{msg:"error.format.required",validator:function(e){return e.split(",")[0].length>0}},marketingschedule:{msg:"error.format.marketingschedule",validator:function(e,t){var i=t.find(".begin-at").dropdown("get value");if(0==i){var a=t.next(),n=a.find(".end-at").dropdown("get value");if(0==n){var o=t.find("[name=start_date]").val()+" "+t.find("[name=start_time]").val(),s=a.find("[name=end_date]").val()+" "+t.find("[name=end_time]").val();return s>o}}return!0}},subsciption:{msg:"error.format.required",validator:function(e,t,i){return!(!i||0==i.length)}},exportdata:{msg:"error.format.required",validator:function(e,t,i){return!(!i.classNames||0==i.classNames.length)}},numberbigger:{msg:"error.format.bigger",rules:["number"],validator:function(e,t,i){return i=i||{},!e||!i.compareWithVal||parseInt(e)<parseInt(i.compareWithVal)?!1:!0}},numberGTE0:{msg:"error.format.numberGTE0",validator:function(t){return""==t?!1:e.isNumeric(t)&&/^[1-9][0-9]*$/.test(t)&&t>=0?!0:!1}},numberGTE1:{msg:"error.format.numberGTE1",validator:function(t){return""==t?!1:e.isNumeric(t)&&/^[1-9][0-9]*$/.test(t)&&t>=1?!0:!1}},numberGT0:{msg:"error.format.numberGT0",validator:function(t){return""==t?!1:e.isNumeric(t)&&/^[1-9][0-9]*$/.test(t)&&t>0?!0:!1}},numberBT1To7:{msg:"error.format.numberBT1To7",validator:function(t){return""==t?!1:e.isNumeric(t)&&/^[1-9][0-9]*$/.test(t)&&t>=1&&7>=t?!0:!1}},numberBT1To7AndBigger:{msg:"error.format.numberBT1To7AndBigger",validator:function(t,i,a){return a=a||{},!t||!a.compareWithVal||parseInt(t)<parseInt(a.compareWithVal)?!1:""==t?!1:e.isNumeric(t)&&/^[1-9][0-9]*$/.test(t)&&t>=1&&7>=t?!0:!1}},phoneAndNotempty:{msg:"error.format.phone",validator:function(t){var t=e.trim(t),i=/^(([0\+]\d{2,3}-)?(0\d{2,3})-)?(\d{7,8})(-(\d{3,}))?$/.test(t),a=/^1[3|4|5|6|7|8|9][0-9]{1}[0-9]{8}$/.test(t);return i||a?!0:!1}},checkboxNotEmpty:{msg:"error.local.event-not-empty",validator:function(e,t){return t.find("input:checked").length>0}}}}),define("core/functions/Validator",["app","core/functions/UI","config/validate","jquery","underscore"],function(e,t,i,a,n){function o(e){this.__config=e,this.execute=function(e,t,i){var a={result:!0,msg:"success"},n={result:!1,msg:this.__config.msg},o=this.__config.rules;for(var s in o){var r=o[s].execute(e,t,i);if(!r.result)return r}var l=this.__config.regex;if(l&&!l.test(e))return n;var c=this.__config.validator;return c&&"function"==typeof c&&!c(e,t,i)?n:a}}function s(){this.__rules={},this.init()}s.prototype.addRules=function(e,t){var i=this,a=this.__rules,s=n.extend({},n.pick(t,"regex","msg","validator"));if(t.rules){s.rules=[];try{n.forEach(t.rules,function(e){if("string"==typeof e&&a[e])s.rules.push(a[e]);else{if("object"!=typeof e)throw new Error("Error:rule format error");var n=i.addRules("",t);s.rules.push(n)}})}catch(r){console.log(r)}}var l=new o(s);return e&&(a[e]=l),l},s.prototype.removeRules=function(e){rules[e]="",delete rules[e]},s.prototype.init=function(){var e=this;n.forEach(i,function(t,i){e.addRules(i,t)})},s.prototype.validate=function(e,i){if(1===e.length){/\s?validate-(\w+)\s?/.test(e.attr("class"));var a,n=RegExp.$1,o={};try{e.is(".select2-parts")?a=e.dropdown2("get value"):e.is(".ui.dropdown")?a=e.dropdown("get value"):e.is("input,textarea,select")&&(a=e.val())}catch(s){}return n&&this.__rules[n]&&(o=this.__rules[n].execute(a,e,i)),1==o.result?(t.toggleSuccess(e),!0):(e.unbind(".validate"),t.toggleError(e,o.msg),!1)}var r=this;for(var l in e)if(0==r.validate(e[l]))return!1;return!0},s.prototype.check=function(e){var t=!0,i=this;return a(e).find(".validate").each(function(e,n){0==i.validate(a(n))&&(t=!1)}),t};var r=new s;return r}),define("component/dialog/BasicDialog",["app","Logger","core/functions/Validator","marionette","jquery","underscore","semanticui_dropdown"],function(e,t,i,a,n,o){return a.ItemView.extend({template:o.template('<div class="ui form"></div>'),beforeShow:function(){},beforeHide:function(){this.$(".dropdown-parts").each(function(e,t){n(t).data("moduleDropdown")&&n(t).dropdown("destroy")})},showLoading:function(){this.$(".ui.form").addClass("loading"),n("#app-dialog .ui.primary.button").addClass("disabled")},hideLoading:function(){this.$(".ui.form").removeClass("loading"),n("#app-dialog .ui.primary.button").removeClass("disabled")},autoCheck:function(e){var t=n(e.currentTarget).closest(".field");i.check(t)},isValid:function(){return i.check(this.$el)},renderDropdown:function(){this.$(".dropdown-parts").each(function(e,t){n(t).data("moduleDropdown")||n(t).dropdown()})},renderTips:function(){this.$("[data-tip]").each(function(e,t){var i=n(t).attr("data-tip");n(t).append('<i class="sem-helper-tip icomoon icomoon-help" data-sem-key="'+i+'"></i>')})},render:function(){a.ItemView.prototype.render.call(this),this.renderDropdown(),this.$el.i18n(),this.renderTips()}})}),define("modules/settings/general/deleteAppView/view",["app","tpl!./template.html","component/dialog/BasicDialog"],function(e,t,i){return i.extend({template:t,getValue:function(){var e=this.$("[name=password]").val();return{password:e}}})}),define("modules/settings/common/component/BasicForm",["app","dispatcher","Logger","core/functions/Validator","C","marionette","jquery","underscore","i18n","semanticui_checkbox"],function(e,t,i,a,n,o,s,r,l){return o.ItemView.extend({events:{"click .button.submit":"saveData"},beforeShow:function(){var e=this.options.storeName;t.on("refresh:"+e,this.renderTemplate,this,"Component")},beforeHide:function(){var e=this.options.storeName;t.off("refresh:"+e,"Component"),this.$(".ui.checkbox").each(function(e,t){s(t).data("moduleCheckbox")&&s(t).checkbox("destroy")})},autoCheck:function(e){var t=s(e.currentTarget).closest(".field");a.check(t)},saveData:function(t){var n=e.current_action,o={};0!=a.check("#"+n+"-form")&&(this.$el.find("input[name],select[name],textarea[name]").each(function(e,t){var i=t.name,a="checkbox"==t.type?t.checked:t.value;if(i)if(/^([\s\w]+)\.([\s\w]+)$/.test(i))o[RegExp.$1]||(o[RegExp.$1]={}),o[RegExp.$1][RegExp.$2]=a;else if(/^([\s\w]+)\.([\s\w]+)\.([\s\w]+)$/.test(i))o[RegExp.$1]||(o[RegExp.$1]={}),o[RegExp.$1][RegExp.$2]||(o[RegExp.$1][RegExp.$2]={}),o[RegExp.$1][RegExp.$2][RegExp.$3]=a;else if(/^([\s\w]+)\.([\s\w]+)\.([\s\w]+)\[\]$/.test(i))o[RegExp.$1]||(o[RegExp.$1]={}),o[RegExp.$1][RegExp.$2]||(o[RegExp.$1][RegExp.$2]={}),o[RegExp.$1][RegExp.$2][RegExp.$3]=a.split(",");else if(/^([\s\w]+)\.([\s\w]+)\.([\s\w]+)\[\]([\s\w]+)$/.test(i)){if(o[RegExp.$1]||(o[RegExp.$1]={}),o[RegExp.$1][RegExp.$2]||(o[RegExp.$1][RegExp.$2]={}),o[RegExp.$1][RegExp.$2][RegExp.$3]||(o[RegExp.$1][RegExp.$2][RegExp.$3]=[]),"appId"==RegExp.$4){if(""!=a){var n={};n.appId=a,o[RegExp.$1][RegExp.$2][RegExp.$3].push(n)}}else if(o[RegExp.$1][RegExp.$2][RegExp.$3].length>0){var s=r.last(o[RegExp.$1][RegExp.$2][RegExp.$3]);s.secret=a}}else o[i]=a}),s(t.currentTarget).addClass("loading"),e.DataRepository.getStore("Store:Application").updateData(o).then(function(){i.success(l.t("common.success.update"))}).finally(function(){s(t.currentTarget).removeClass("loading")}))},renderComponents:function(){},renderTips:function(){this.$("[data-tip]").each(function(e,t){var i=s(t).attr("data-tip");s(t).append('<i class="sem-helper-tip icomoon icomoon-help" data-sem-key="'+i+'"></i>')})},render:function(){var t=this.options.storeName;e.DataRepository.refresh(t)},renderTemplate:function(){var t=this,i=this.options.storeName,a=this.options.stateName;e.DataRepository.fetch(i,a).done(function(e){t.$el.html(t.template(e)),t.$el.i18n(),t.renderTips(),t.renderComponents(e)})}})}),define("text!modules/settings/general/form/template.html",[],function(){return'<div class="ui form">\n    <div class="field">\n        <label data-i18n="settings.title.app-name" data-tip="settings.tips.app-name"></label>\n        <input class="validate validate-required" type="text" name="name" value="<%- app_name %>">\n    </div>\n    <div class="field">\n        <label data-i18n="settings.title.url" data-tip="settings.tip.url"></label>\n        <div class="ui fluid input">\n            <input class="validate validate-url" type="text" placeholder="http://mysite.com" name="metadata.url" value="<%- app_url %>">\n        </div>\n    </div>\n    <div class="field">\n        <label data-i18n="settings.title.default-lang" data-tip="settings.tips.default-lang"></label>\n\n        <div class="ui fluid search selection dropdown lang">\n            <input type="hidden" name="defaultLang" value="<%- default_lang %>">\n            <i class="dropdown icon"></i>\n            <div class="default text">Select Language</div>\n            <div class="menu"></div>\n        </div>\n    </div>\n    <div class="field">\n        <label data-i18n="settings.title.description" data-tip="settings.tip.description"></label>\n        <textarea name="metadata.desc"><%- desc %></textarea>\n    </div>\n\n    <h4 class="ui header">\n        <span data-i18n="settings.title.release-product"></span>\n        <span data-tip="settings.tip.release-product"></span>\n    </h4>\n\n    <div class="fields release-product-fields">\n        <!-- henrytodo:临时改为sixteen, 上传文件支持后应改回ten -->\n        <div class="sixteen wide field">\n            <div class="ui top attached tabular menu os" style="margin-bottom:20px;">\n                <a class="active item" data-value="ios">iOS</a>\n                <a class="item" data-value="android">Android</a>\n            </div>\n            <div class="ui active bottom attached tab" data-tab="ios">\n                <label data-tip="settings.tips.ios-schema">iOS URL Schema</label>\n                <input type="text" name="urlSchemas.ios" value="<%- uios %>">\n                <label data-tip="settings.tips.ios-id">App Store ID</label>\n                <input type="text" name="appStoreIds.itunesId" value="<%- itunesid %>">\n                <label data-tip="settings.tips.platform">iTunes App Store</label>\n                <input type="text" name="platforms.iTunes App Store" value="<%- ios %>">\n            </div>\n\n            <div class="ui bottom attached tab" data-tab="android">\n                <label data-tip="settings.tips.android-schema">Android URL Schema</label>\n                <input type="text" name="urlSchemas.android" value="<%- uandroid %>">\n                <label data-tip="settings.tips.android-id">Android Package Name</label>\n                <input type="text" name="appStoreIds.packageName" value="<%- package %>">\n                <label data-tip="settings.tips.platform">Google Play Store</label>\n                <input type="text" name="platforms.Google Play Store" value="<%- android %>">\n            </div>\n        </div>\n        <!-- henrytodo:临时加上隐藏此元素, 上传文件支持后应显示 -->\n        <div class="six wide field" style="display: none;">\n            <label data-i18n="settings.title.app-icon" data-tip="settings.tip.icon"></label>\n            <div class="container-flex">\n                <% if(app_icon) {%>\n                <div id="app-publish-icon-empty" class="app-publish-icon-empty" style="background-repeat:no-repeat;background-image:url(<%= app_icon %>);opacity:1;" ></div>\n                <div id="upload-zone" class="flex-1">\n                    <div class="ui button upload-choose btn-grey" data-i18n="settings.tag.upload-choose" style="display:none"></div>\n                    <div class="ui button upload-confirm primary" data-i18n="settings.tag.upload-confirm" style="display:none"></div>\n                    <div class="ui button upload-remove btn-delete" data-i18n="settings.tag.upload-remove" style="display:inline-block"></div>\n                    <div class="app-label" data-i18n="settings.tip.upload"></div>\n                </div>\n                <% }else{ %>\n                <div id="app-publish-icon-empty" class="app-publish-icon-empty"></div>\n                <div id="upload-zone" class="flex-1">\n                    <div class="ui button upload-choose btn-grey" data-i18n="settings.tag.upload-choose" style="display:inline-block">Choose a File</div>\n                    <div class="ui button upload-confirm primary" data-i18n="settings.tag.upload-confirm" style="display:none">Upload</div>\n                    <div class="ui button upload-remove btn-delete" data-i18n="settings.tag.upload-remove" style="display:none">Remove</div>\n                    <div class="app-label" data-i18n="settings.tip.upload"></div>\n                </div>\n                <% } %>\n            </div>\n        </div>\n    </div>\n\n    <div class="ui-hide">\n        <h4 class="ui header" data-i18n="settings.title.app-permission"></h4>\n        <p data-i18n="settings.tip.app-permission" data-tip="settings.tip.allow-create"></p>\n        <div class="inline field">\n            <div class="ui toggle checkbox">\n                <input type="checkbox" name="enableCreateObject" checked>\n                <label data-i18n="settings.title.allow-create"></label>\n            </div>\n        </div>\n    </div>\n    <div class="ui clearing divider ui-hide"></div>\n    <div class="ui button left floated delete-app btn-delete" data-i18n="settings.tag.delete-app"></div>\n    <div class="ui primary submit button right floated" data-i18n="common.tag.save-change"></div>\n</div>'}),define("modules/settings/general/form/view",["app","C","U","Logger","basic/net/Uploader","core/functions/UI","Storage","../deleteAppView/view","../../common/component/BasicForm","text!./template.html","jquery","underscore","i18n","core/functions/Validator","semanticui_checkbox"],function(e,t,i,a,n,o,s,r,l,c,d,u,p){return l.extend({events:{"click .button.submit":"saveData","click .button.add-platform":"addNewPlatform","click .fa-times-circle":"removePlatformItem","click .button.delete-app":"deleteApplication","click #upload-zone .upload-confirm":"uploadIcon","click #upload-zone .upload-remove:not(.disabled)":"removeIcon","keyup input[name=name]":"changeAppName","keyup input":"autoCheck","change .custom-platform":"updatePlatform","click .os.tabular>.item":"toggleOSTab"},template:u.template(c),beforeHide:function(){l.prototype.beforeHide.call(this),this.$(".ui.dropdown").each(function(e,t){d(t).data("moduleDropdown")&&d(t).checkbox("destroy")})},toggleOSTab:function(e){var t=d(e.currentTarget).attr("data-value");this.$(".os.tabular>.item").removeClass("active"),d(e.currentTarget).addClass("active"),this.$(".os.tabular").siblings().removeClass("active"),this.$(".os.tabular").siblings("[data-tab="+t+"]").addClass("active")},renderComponents:function(t){var i=this,a=u.template('<div class="container-flex"><input class="form-control platform-name" type="text" value="<%- name %>" placeholder="Platform Name"><input class="form-control platform-link flex-1" type="text" name="platforms.<%- name %>" value="<%- value %>" placeholder="App Link"><span class="fa fa-lg fa-times-circle"></span></div>');u.forEach(t.platforms,function(e,t){u.contains(["iTunes App Store","Google Play Store","Web","Windows App Store"],t)||i.$("#platform_link .button.add-platform").before(a({name:t,value:e}))}),this.$(".ui.checkbox").checkbox(),e.DataRepository.fetch("Store:Lang").done(function(e){var t=[];u.forEach(e,function(e){t.push(d('<div class="item" data-value="'+e.id+'">'+e.text+"</div>"))}),i.$(".lang.dropdown .menu").html(t),i.$(".lang.dropdown").dropdown()}),o.bindUploader(this.$("#upload-zone>.upload-choose"),"#app-publish-icon-empty",function(){i.$("#app-publish-icon-empty").html(""),i.$("#upload-zone>.upload-confirm").show(),i.$("#app-publish-icon-empty").append('<canvas id="app-icon-progress-canvas" width="174" height="174"></canvas>'),o.initIconProgress("#app-icon-progress-canvas")})},uploadIcon:function(t){var s=this,r=d(t.currentTarget).siblings("input[type=file]");o.startUploadIcon("#app-icon-progress-canvas");var l=new n({$el:r,checkImage:!1,onSuccess:function(t){var n;try{n=JSON.parse(t)}catch(o){n={}}a.success(p.t("common.success.upload"));var r={metadata:{icon:i.parseUrl(n.url)}},l=s.options.storeName;s.$("#upload-zone>.upload-remove").removeClass("disabled"),e.DataRepository.getStore(l).updateData(r).done(function(){a.success(p.t("common.success.update"))})},onProgress:function(e){o.progressIcon("#app-icon-progress-canvas",100*e)},onComplete:function(){s.$("#upload-zone>.upload-confirm").hide(),s.$("#upload-zone>.upload-choose").hide(),s.$("#upload-zone>.upload-remove").show().addClass("disabled")},onError:function(){s.$("#upload-zone>.upload-remove").removeClass("disabled"),a.error(p.t("common.fail.upload"))}});l.uploadFile()},removeIcon:function(){var t=this,i={metadata:{icon:""}},n=this.options.storeName;e.DataRepository.getStore(n).updateData(i).done(function(){t.$("#app-publish-icon-empty").removeAttr("style"),t.$("#upload-zone>.upload-remove").hide(),t.$("#upload-zone>.upload-choose").show(),t.$("#upload-zone>input").val(""),a.success(p.t("common.success.update"))})},changeAppName:function(e){var i=d(e.currentTarget).val(),a=d("#app-selector .text>img"),n=t.get("User.AppId");d("#app-selector .text").html(i).prepend(a),d("#app-selector .item[data-value="+n+"]>span").text(i)},addNewPlatform:function(e){var t=d('<div class="container-flex"><input class="form-control platform-name custom-platform" type="text" value="" placeholder="Platform Name"><input class="form-control platform-link custom-platform-value flex-1" type="text" name="platforms." value="" placeholder="App Link"><span class="fa fa-lg fa-times-circle"></span></div>').insertBefore(d(e.currentTarget));t.find("input:first").select().focus()},updatePlatform:function(e){var t=d(e.currentTarget).val();d(e.currentTarget).siblings(".custom-platform-value").attr("name","platforms."+t)},removePlatformItem:function(e){d(e.currentTarget).parent(".container-flex").remove()},deleteApplication:function(){var t=this;o.showDialog(p.t("settings.title.delete-app"),r,{success:function(a){var n=a.getValue(),o=t.options.storeName;a.showLoading(),e.DataRepository.getStore(o).removeApp(n).then(function(){s.remove("current_app_id"),i.jumpTo("/settings")},function(e){var t=JSON.parse(e);(210==t.errorCode||12e3==t.errorCode)&&a.$("[name=password]").val("").focus()}).finally(function(){a.hideLoading()})}})}})}),define("core/functions/Formatter",["C","moment","underscore"],function(e,t,i){return{AnalyticsTask:function(e,a){var n,o=[],s=[],r={},l=t(a.params.start_date,"YYYY-MM-DDHH"),c=t(a.params.end_date,"YYYY-MM-DDHH"),d=a.params.time_unit;if(i.forEach(e.stats,function(e){r[e.date+""]=e}),"hourly"==d)for(var u=l.unix(),p=c.subtract(-23,"hours").unix();p>=u;)n=parseInt(t.unix(u).format("YYYYMMDDHH")),o.push(n),s.push(r[n]?r[n]:{date:n}),u+=3600;else if("daily"==d)for(var m=l.clone();c>=m;)n=m.format("YYYYMMDD"),o.push(n),s.push(r[n]?r[n]:{date:n}),m.subtract(-1,"days");else if("weekly"==d){var f=l.clone();for(1==l.day()||(f=0==l.day()?f.day(1):f.subtract(-7,"days").day(1));c>=f;)n=f.format("YYYYMMDD"),o.push(n),s.push(r[n]?r[n]:{date:n}),f.subtract(-7,"days")}else if("monthly"==d){var h=l.clone();for(1!=l.date()&&(h=h.subtract(-1,"month").date(1));c>=h;)n=h.format("YYYYMMDD"),o.push(n),s.push(r[n]?r[n]:{date:n}),h.subtract(-1,"month").date(1)}return e.dates=o,e.stats=s,e.chart_name=l.format("ll")+" - "+c.format("ll"),e},Float2Money:function(e,t,i){if(!$.isNumeric(i)||Number(i)<0)return"0";/^(\d+)(\.\d+)?$/.test(Number(i));var a=RegExp.$1,n=RegExp.$2||"";n&&(n=n.slice(0,3));for(var o="";a.length>3;)o=","+a.slice(a.length-3)+o,a=a.slice(0,a.length-3);return a+o+n},Float2Percent:function(e,t,i){return"number"==typeof i?Math.round(1e4*i)/100+"%":i},Float2Percent100:function(e,t,i){return"number"==typeof i?i+"%":i},TotalPercent:function(e,t,i,a,n){var o=Math.round(1e4*n[a.field+"_rate"])/100+"%";return i+" ("+o+")"},DateFormat:function(e,i,a){if(10==(a+"").length)return t(a,"YYYYMMDDHH").format("lll");if(9==(a+"").length){var n=a.charAt(a.length-1),o=t(a,"YYYYMMDDHH").format("ll"),s="";if("W"==n)s=t(a,"YYYYMMDD").subtract(-6,"days").format("ll");else{var r=t(a,"YYYYMMDD"),l=1==r.date()?r:r.subtract(-1,"month");s=l.subtract(-1,"month").subtract(1,"days").format("ll")}return o+" - "+s}return t(a,"YYYYMMDDHH").format("ll")},Timestamp2Date:function(e,i,a){return a&&-1!=a?t.unix((a||0)/1e3).format("MM/DD/YYYY HH:mm"):"--"},NormalDateFormat:function(e,i,a){return t(a).format("MM/DD/YYYY HH:mm")},StringFormat:function(e,t,i){return"string"==typeof i?i:""},NumberFormat:function(e,t,i){return"number"==typeof i?i:0},ActionAllFormat:function(){return'<i class="action edit icon"></i><i class="action trash icon"></i>'},ActionDeleteFormat:function(){return'<i class="action trash icon"></i>'}}}),define("view/Layout",["app","basic/Object","U","Q","dispatcher","jquery","underscore"],function(e,t,i,a,n,o,s){var r=["store","action","root","stateRoot","template","defaultState"],l=t.extend({initialize:function(e){if(this._configure(e),"undefined"==typeof this.options.root)throw new Error("Layout: layout root must be set");return this._defaultState=this.options.defaultState?this.options.defaultState:"default",this._currentState=this._defaultState,this._state={},this._stateRoot=null,this._registerEvent(),!0},_configure:function(e){this.options&&(e=s.extend({},s.result(this,"options"),e)),this.options=s.pick(e,r)},_registerEvent:function(){n.on("hide",this.hide,this,"Layout"),n.on("show",this.show,this,"Layout")},show:function(t){this.beforeShow(),this.options.stay||"all"==this.options.action||o.inArray(this.options.action,t.actions)>-1?(t.options.stayState||this.changeState(t.state||this._defaultState),this.options.store&&this.loadStoreData(),this.renderState(t.options),o(this.options.root).show()):this.options.action==t.action&&(t.options.stayState||this.changeState(t.state||this._defaultState),this.options.store&&this.loadStoreData(),e.current_action=t.action,e.current_state=this._currentState,this.renderState(t.options),o(this.options.root).show())},hide:function(e){this.options.stay||this.options.action!=e.action&&"none"!=o(this.options.root).css("display")&&(o(this.options.root).hide(),this.clearState())},render:function(){var e=this.options.template?this.options.template:"";if(o(this.options.root).append(e).hide(),this.options.stateRoot){var t=o(this.options.root).find(this.options.stateRoot);if(!(t.length>0))throw new Error('Layout: "'+t+'" can not be found');this._stateRoot=t.get(0)}else this._stateRoot=o(this.options.root).get(0)},addDefaultState:function(e){this.addState(this._defaultState,e)},addState:function(e,t){var i=this;this._state[e]=[],s.isArray(t)||(t=[t]),s.forEach(t,function(t){if(!t.container.create)throw new Error("Illegal Container!!");var a=t.container.create(t);a.loadComponents(t.components),i._state[e].push(a)})},changeState:function(){throw new Error("Layout: You must implement changeState method")},renderState:function(){throw new Error("Layout: You must implement renderState method")},clearState:function(){throw new Error("Layout: You must implement clearState method")},loadStoreData:function(){throw new Error("Layout: You must implement loadStoreData method")}});return l.create=function(e){var t=new l;return 0==t.initialize(e)?!1:t},l}),define("layout/BasicLayout",["app","core/functions/StoreLoader","view/Layout","jquery","underscore"],function(e,t,i,a,n){var o=i.extend({renderState:function(e){var t=this._state[this._currentState];if(!t)throw new Error('BasicLayout: state "'+this._currentState+'" is not defined');var i=this._stateRoot;n.forEach(t,function(t){t.render(i,e)})},changeState:function(e){this.clearState(),this._currentState=e},show:function(t){this.options.action==t.action&&(this.changeState(t.state||this._defaultState),this.options.store&&this.loadStoreData(),e.current_action=t.action,e.current_state=this._currentState,this.renderState(t.options),a(this.options.root).show())},hide:function(e){this.options.action!=e.action&&"none"!=a(this.options.root).css("display")&&(a(this.options.root).hide(),this.clearState())},clearState:function(){var e=this._state[this._currentState];if(!e)throw new Error('BasicLayout: state "'+this._currentState+'" is not defined');var t=this._stateRoot;n.forEach(e,function(e){e.clear(t)})},loadStoreData:function(){var e=this.options.store;t.load(e)}});return o.create=function(e){var t=new o;return 0==t.initialize(e)?!1:t},o}),define("core/functions/ComponentFactory",[],function(){var e={};return e.createComponent=function(e){e=e||{};var t=e.constructor,i=e.extend;i&&i.storeName&&(e.options=e.options||{},e.options.storeName=i.storeName);var a=new t(e.options);return a.init&&a.init(),a},e}),define("view/Container",["basic/Object","core/functions/ComponentFactory","jquery","underscore","i18n"],function(e,t,i,a){var n=["template","root"],o=e.extend({initialize:function(e){return this._configure(e||{}),this._renderindex=0,this._components=[],this._componentStack={},this._containerRoot=null,this._root=null,this.cid=a.uniqueId("container_"),!0},_configure:function(e){this.options&&(e=a.extend({},a.result(this,"options"),e)),e.events&&(this.events=a.extend({},this.events||{},e.events)),this.options=a.pick(e,n)},loadComponents:function(e){var t=this;a.forEach(e,function(e){t.addComponent(e)})},getContainer:function(){return i('<div id="'+a.uniqueId("component-")+'"></div>')},getComponentByIndex:function(e){if(!this._components[e])return!1;var t=this._components[e].name;return this._componentStack[t]||!1},createComponent:function(e,t){return e.factory.createComponent(e,t)},addComponent:function(e){this._components.push({name:e.name,constructor:e.constructor,factory:e.factory||t,options:e.options,extend:e.extend})},renderComponents:function(e){var t,n=this;if(this.options.root){var o=this._containerRoot.filter(this.options.root),s=this._containerRoot.find(this.options.root);t=i(o.length>0?o.get(0):s.length>0?s.get(0):this._containerRoot.get(0))}else t=i(this._containerRoot.get(0));a.forEach(this._components,function(i){var a=i.name;"undefined"==typeof n._componentStack[a]&&(n._componentStack[a]=n.createComponent(i,e||{}));var o=n._componentStack[a],s=n.getContainer(a,e||{}).appendTo(t).get(0);o.setElement(s),o.beforeShow&&o.beforeShow(),o.render(e||{})})},beforeRenderComponents:function(){},render:function(e,t){var a;this._root=i(e),this.delegateEvents(),a=this.options.template?"function"==typeof this.options.template?i(this.options.template(t)).appendTo(i(e)):i(this.options.template).appendTo(i(e)):i(e),a.i18n(),this._containerRoot=a,this.beforeRenderComponents(),this.renderComponents(t),this.afterRenderComponents()
},afterRenderComponents:function(){},clear:function(e){if(this.undelegateEvents(),a.forEach(this._componentStack,function(e){e.beforeHide&&e.beforeHide()}),!this._containerRoot)return!1;if(this._containerRoot.length>1)this._containerRoot.each(function(){i(this).remove()});else{var t=this._containerRoot.get(0);t&&t!=e?this._containerRoot.remove():i(e).html("")}},delegateEvents:function(){var e=this.events;if(e){this.undelegateEvents();for(var t in e){var i=e[t];if(a.isFunction(i)||(i=this[e[t]]),i){var n=t.match(/^(\S+)\s*(.*)$/),o=n[1],s=n[2];i=a.bind(i,this),o+=".delegateEvents"+this.cid,""===s?this._root.on(o,i):this._root.on(o,s,i)}}return this}return!1},undelegateEvents:function(){return this._root&&this._root.off(".delegateEvents"+this.cid),this}});return o.create=function(e){var t=new o;return 0==t.initialize(e)?!1:t},o}),define("container/BasicContainer",["view/Container","jquery","underscore"],function(e,t){var i=e.extend({getContainer:function(e){return t('<div id="'+e+'">')}});return i.create=function(e){var t=new i;return 0==t.initialize(e)?!1:t},i}),define("modules/settings/general/layout",["./form/view","core/functions/Formatter","layout/BasicLayout","container/BasicContainer"],function(e,t,i,a){return{general:{constructor:i,root:"#settings-general",state:{"default":[{container:a,root:".container",template:'<div class="container-normal"></div>',components:[{name:"general-form",constructor:e,options:{stateName:"general"},extend:{storeName:"Store:Application"}}]}]}}}}),define("text!modules/settings/application/form/template.html",[],function(){return'<div class="ui form">\n    <h3 class="ui header" data-i18n="settings.title.app-keys" data-tip="settings.tips.app-keys"></h3>\n    <div class="field">\n        <label data-tip="settings.tip.application-id">Application ID</label>\n        <div class="ui small action input">\n            <input type="text" readonly value="<%- objectId %>" >\n            <div class="ui labeled icon buttons">\n                <div class="ui button copy-btn" data-clipboard-text="<%- objectId %>">\n                    <span data-i18n="common.tag.copy"></span>\n                    <i class="copy icon"></i>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="field">\n        <label data-tip="settings.tip.client-key">Client Key</label>\n        <div class="ui small action input">\n            <input type="text" readonly value="<%- clientKey %>" >\n            <div class="ui labeled icon buttons">\n                <div class="ui button copy-btn" data-clipboard-text="<%- clientKey %>">\n                    <span data-i18n="common.tag.copy"></span>\n                    <i class="copy icon"></i>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="field">\n        <label data-tip="settings.tip.javascript-key">Javascript Key</label>\n        <div class="ui small action input">\n            <input type="text" readonly value="<%- javascriptKey %>" >\n            <div class="ui labeled icon buttons">\n                <div class="ui button copy-btn" data-clipboard-text="<%- javascriptKey %>">\n                    <span data-i18n="common.tag.copy"></span>\n                    <i class="copy icon"></i>\n                </div>\n            </div>\n        </div>\n    </div>\n  <!--   <div class="field">\n        <label data-tip="settings.tip.dotnet-key">.NET Key</label>\n        <div class="ui small action input">\n            <input type="text" readonly value="<%- netKey %>" >\n            <div class="ui labeled icon buttons">\n                <div class="ui button copy-btn" data-clipboard-text="<%- netKey %>">\n                    Copy\n                    <i class="copy icon"></i>\n                </div>\n            </div>\n        </div>\n    </div> -->\n    <div class="field">\n        <label data-tip="settings.tip.rest-key">REST API Key</label>\n        <div class="ui small action input">\n            <input type="text" readonly value="<%- restAPIKey %>" >\n            <div class="ui labeled icon buttons">\n                <div class="ui button copy-btn" data-clipboard-text="<%- restAPIKey %>">\n                    <span data-i18n="common.tag.copy"></span>\n                    <i class="copy icon"></i>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="field">\n        <label data-tip="settings.tip.master-key">Master Key</label>\n        <div class="ui small action input">\n            <input type="text" readonly value="<%- masterKey %>" >\n            <div class="ui labeled icon buttons">\n                <div class="ui button copy-btn" data-clipboard-text="<%- masterKey %>">\n                    <span data-i18n="common.tag.copy"></span>\n                    <i class="copy icon"></i>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'}),define("modules/settings/application/form/view",["app","Logger","../../common/component/BasicForm","text!./template.html","jquery","underscore","zeroclipboard","i18n"],function(e,t,i,a,n,o,s){return i.extend({template:o.template(a),renderComponents:function(){s.config({swfPath:"/ZeroClipboard.swf"});var e=new s(n(".ui.button.copy-btn"));e.on("ready",function(){e.on("aftercopy",function(){t.success("common.success.copy",{doI18n:!0})})})}})}),define("modules/settings/application/layout",["./form/view","core/functions/Formatter","layout/BasicLayout","container/BasicContainer"],function(e,t,i,a){return{application:{constructor:i,root:"#settings-application",state:{"default":[{container:a,root:".container",template:'<div class="container-normal"></div>',components:[{name:"application-form",constructor:e,options:{stateName:"application"},extend:{storeName:"Store:Application"}}]}]}}}}),define("text!modules/settings/notification/form/template.html",[],function(){return'<div class="ui form">\n    <h3 class="ui header" data-i18n="settings.title.apple-cert" data-tip="settings.tips.apple-cert"></h3>\n\n    <div class="field">\n        <label data-tip="settings.tips.cert">Certificate file (.p12)</label>\n        <span id="apple-cert-upload">\n            <div class="ui btn-grey button upload-choose" data-i18n="settings.tag.upload-choose"></div>\n        </span>\n        <% if(cert){ %>\n            <span id="apple-cert-desc" class="success" style="color:green;">\n                <span data-i18n="settings.tag.cert-uploaded"></span>\n            </span>\n        <% }else{ %>\n            <span id="apple-cert-desc" class="empty" style="color:grey;">\n                <span data-i18n="settings.tag.cert-empty"></span>\n            </span>\n        <% } %>\n        <span id="apple-cert-selected" style="display:none;">\n            <span data-i18n="settings.tag.cert-selected"></span>\n        </span>\n        <span id="apple-cert-error" style="display:none;">\n            <span data-i18n="settings.tag.cert-error"></span>\n        </span>\n    </div>\n    <div class="field">\n        <label data-tip="settings.tips.password">Password</label>\n        <input type="password" value="<%- password %>" name="pushConfig.appleConfig.password">\n    </div>\n\n    <h3 class="ui header" data-i18n="settings.title.android-cert" data-tip="settings.tips.android-cert"></h3>\n    <div class="field">\n        <label data-tip="settings.tips.api-key">API Key</label>\n        <input type="text" value="<%- apiKey %>" name="pushConfig.gcmConfig.apiKey">\n    </div>\n    <div class="field">\n        <label data-tip="settings.tips.sender-id">Sender ID</label>\n        <input type="text" value="<%- senderId %>" name="pushConfig.gcmConfig.senderId">\n    </div>\n\n    <div class="ui primary submit button right floated" data-i18n="common.tag.save-change"></div>\n</div>'}),define("modules/settings/notification/form/view",["app","C","core/functions/UI","Logger","../../common/component/BasicForm","text!./template.html","jquery","underscore","i18n"],function(e,t,i,a,n,o,s,r,l){return n.extend({template:r.template(o),events:{"click .button.submit":"saveData","click #apple-cert-upload>.upload-confirm":"uploadCertFile"},renderComponents:function(e){var t=this;t.applecert=e.cert||!1,t.loadFile=!1,i.bindUploader(this.$("#apple-cert-upload>.upload-choose"),null,function(){t.loadFile=!0;var e=t.$("input[type=file]"),i=e.get(0).files[0];if(!i)return t.$("#apple-cert-error").hide(),t.$("#apple-cert-desc").show(),t.$("#apple-cert-selected").hide(),void(t.loadFile=!1);if("application/x-pkcs12"!=i.type)return t.$("#apple-cert-error").show(),t.$("#apple-cert-desc").hide(),t.$("#apple-cert-selected").hide(),a.error("error.format.file-type",{doI18n:!0}),void(t.applecert=!1);var n=new FileReader;n.onload=function(e){var i=e.target.result;i?(t.$("#apple-cert-error").hide(),t.$("#apple-cert-desc").hide(),t.$("#apple-cert-selected").show(),t.applecert=i.replace("data:application/x-pkcs12;base64,","")):(t.$("#apple-cert-error").show(),t.$("#apple-cert-desc").hide(),t.$("#apple-cert-selected").hide(),a.error("error.local.cert-file",{doI18n:!0}),t.applecert=!1)},n.readAsDataURL(i)})},getValue:function(){var e={appleConfig:{},gcmConfig:{}};return this.applecert&&(e.appleConfig.key=this.applecert),e.appleConfig.password=this.$('[name="pushConfig.appleConfig.password"]').val(),e.gcmConfig.apiKey=this.$('[name="pushConfig.gcmConfig.apiKey"]').val(),e.gcmConfig.senderId=this.$('[name="pushConfig.gcmConfig.senderId"]').val(),e},saveData:function(t){if(this.loadFile&&!this.applecert)return void a.error("error.local.cert-file",{doI18n:!0});var i=this,n=this.getValue();s(t.currentTarget).addClass("loading"),e.DataRepository.getStore("Store:Application").updateSetting(n).then(function(){a.success("common.success.update",{doI18n:!0}),e.DataRepository.refresh("Store:Application"),i.applecert&&i.$("#apple-cert-desc").addClass("success").html('<span data-i18n="settings.tag.cert-uploaded">'+l.t("settings.tag.cert-uploaded")+"</span>")}).finally(function(){s(t.currentTarget).removeClass("loading")})}})}),define("modules/settings/notification/layout",["./form/view","core/functions/Formatter","layout/BasicLayout","container/BasicContainer"],function(e,t,i,a){return{notification:{constructor:i,root:"#settings-notification",state:{"default":[{container:a,root:".container",template:'<div class="container-normal"></div>',components:[{name:"notification-form",constructor:e,options:{stateName:"notification"},extend:{storeName:"Store:Application"}}]}]}}}}),define("text!modules/settings/authentication/form/template.html",[],function(){return'<div class="ui form">\n    <h3 class="ui header" data-i18n="settings.title.user-auth" data-tip="settings.tips.user-auth"></h3>\n    <div class="inline field">\n        <div class="ui toggle checkbox">\n            <input type="checkbox" name="authConfig.baseUserName" <% if(baseUserName){ %>checked<% } %>>\n            <label data-i18n="settings.title.allow-auth"></label>\n        </div>\n    </div>\n    <div class="inline field">\n        <div class="ui toggle checkbox">\n            <input type="checkbox" name="authConfig.anonymousUser" <% if(anonymousUser){ %>checked<% } %>>\n            <label data-i18n="settings.title.allow-anonymous"></label>\n        </div>\n    </div>\n    <div class="locale_en_only">\n    <h4 class="ui header" data-tip="settings.tip.facebook">Facebook</h4>\n    <div class="inline field">\n        <div class="ui toggle checkbox">\n            <input type="checkbox" name="authConfig.faceBookAuth.authEnable" <% if(faceBookAuth){ %>checked<% } %>>\n            <label data-i18n="settings.title.allow-facebook"></label>\n        </div>\n    </div>\n    <div class="field">\n        <label data-i18n="settings.title.facebook-app" data-tip="settings.tips.facebook-app"></label>\n        <div class="fbapp-list">\n            <% for(var i in faceBookKey){ %>\n            <div class="fbapp-item container-flex">\n                <input type="text" class="form-control flex-1" value="<%= faceBookKey[i].appId %>" name="authConfig.faceBookAuth.appInfos[]appId"/>\n                <input type="text" class="form-control flex-1" value="<%= faceBookKey[i].secret %>" name="authConfig.faceBookAuth.appInfos[]secret" style="margin-left: 10px;"/>\n                <i class="fa fa-times-circle"></i>\n            </div>\n            <% } %>\n        </div>\n    </div>\n    <h4 class="ui header" data-tip="settings.tip.twitter">Twitter</h4>\n    <div class="inline field">\n        <div class="ui toggle checkbox">\n            <input type="checkbox" name="authConfig.twitterAuth.authEnable" <% if(twitterAuth){ %>checked<% } %>>\n            <label data-i18n="settings.title.allow-twitter"></label>\n        </div>\n    </div>\n    <div class="field">\n        <label data-i18n="settings.title.twitter-key" data-tip="settings.tips.twitter-key"></label>\n        <input type="text" name="authConfig.twitterAuth.consumerKeys[]" value="<%- twitterKey %>" data-i18n="[placeholder]settings.placeholder.twitter-key"/>\n    </div>\n    </div>\n    <div class="ui primary submit button right floated" data-i18n="common.tag.save-change"></div>\n</div>'}),define("modules/settings/authentication/form/view",["app","API","dispatcher","core/functions/UI","Logger","../../common/component/BasicForm","text!./template.html","jquery","underscore","i18n","semanticui_checkbox"],function(e,t,i,a,n,o,s,r,l){return o.extend({template:l.template(s),events:{"click .button.submit":"saveData","click .add-facebook-app":"addFbApp","click .fbapp-item .fa-times-circle":"deleteFbApp"},addFbApp:function(){var e=r('<div class="fbapp-item container-flex"><input type="text" class="flex-1" name="authConfig.faceBookAuth.appInfos[]appId" data-i18n="[placeholder]settings.placeholder.fbid"/><input type="text" class="flex-1" name="authConfig.faceBookAuth.appInfos[]secret" data-i18n="[placeholder]settings.placeholder.fbsecret" style="margin-left: 10px;"/></div>').appendTo(this.$(".fbapp-list"));e.i18n()},deleteFbApp:function(e){r(e.currentTarget).parent(".fbapp-item").remove()},renderComponents:function(e){"zh"===window.locale&&r(".locale_en_only").remove(),this.$(".ui.checkbox").checkbox(),e.faceBookKey&&e.faceBookKey.length<1&&this.addFbApp()}})}),define("modules/settings/authentication/layout",["./form/view","core/functions/Formatter","layout/BasicLayout","container/BasicContainer"],function(e,t,i,a){return{authentication:{constructor:i,root:"#settings-authentication",state:{"default":[{container:a,root:".container",template:'<div class="container-normal"></div>',components:[{name:"authentication-form",constructor:e,options:{stateName:"authentication"},extend:{storeName:"Store:Application"}}]}]}}}}),define("modules/common/ToolbarContainer",["container/BasicContainer"],function(e){var t=e.extend({render:function(t,i){e.prototype.render.call(this,"#main-toolbar>.toolbar-content",i)}});return t.create=function(e){var i=new t;return 0==i.initialize(e)?!1:i},t}),define("modules/settings/common/EmailStore",["API","data/Task","store/RestStore","Q","underscore"],function(e,t,i,a,n){var o=i.extend({urlConfig:function(){return e.get("Data.EmailTpl")},getDataById:function(e){var i=this._origin_data.data,o=a.defer(),s=this._origin_data.type;if("data"==s){var r=n.find(i,function(t){return t.id==e});o.resolve(r)}else{var l=this.urlConfig()+"/"+e;t.create({url:l}).start().done(function(e){o.resolve(e)})}return o.promise},"delete":function(e){var i=a.defer(),n=this.urlConfig()+"/"+e,o=t.create({url:n,method:"delete"});return o.start().done(function(e){3!=o.state?i.resolve(e):i.reject(e)}),i.promise},add:function(e){var i=a.defer(),n=this.urlConfig(),o=t.create({url:n,method:"post",params:e});return o.start().done(function(e){3!=o.state?i.resolve(e):i.reject(e)}),i.promise},update:function(e,i){var n=a.defer(),o=this.urlConfig()+"/"+e,s=t.create({url:o,method:"put",params:i});return s.start().done(function(e){3!=s.state?n.resolve(e):n.reject(e)}),n.promise}});return o.create=function(e){var t=new o;return 0==t.initialize(e||{})?!1:t},o}),define("modules/settings/email/store",["C","dispatcher","data/Task","../common/EmailStore","underscore","language","i18n"],function(e,t,i,a,n,o,s){return[{name:"Store:Email",constructor:a,initialize:!1,task:i,taskOptions:{url:"Data.EmailTpl",formatter:function(e){function t(e){var t={verify_email_tpl:"Verify Email",reset_password_tpl:"Reset Password Email"},i={verify_email_tpl:"settings.label.verify-email",reset_password_tpl:"settings.label.reset-password-email"};return n.each(e,function(e){0===e.type&&t[e.templateName]&&(e.templateName=s.t(i[e.templateName])||t[e.templateName])}),e}return e=n.isArray(e.results)?e.results:[],e=t(e)},buffer:{}},generator:function(e,i){var a,o=t.request("getValue:TemplateList",{},"Component"),s=t.request("getValue:Search",{},"SearchContainer"),r={};return a=n.extend({},i.params,e,r),a.where=s,o&&o.order&&(o.order=o.order.rule<0?"-"+o.order.field:o.order.field),a=n.extend({},a,o),{params:a}},state:{email:function(e){return e}}}]}),define("com_fun",["app","jquery","underscore","moment","Q","semanticui_dropdown2"],function(e,t,i,a,n){return{initSimpleDropdown:function(t,a,o,s){function r(e){var t=i.template('<div class="item" data-value="<%= id %>"><%= text %></div>'),n=i.map(e,function(e,i){return 0==i&&(s=s||e[o.valueName||"id"]),e?t({id:e[o.valueName||"id"],text:e[o.textName||"text"]}):void 0});n=n.join(""),c?a.find(".menu").html(n):a.find(".menu").append(n),a.data("moduleDropdown")||(s?a.dropdown("set selected",s):a.dropdown()),d.resolve()}var l,c,d=n.defer();return i.isObject(t)?(s=o,o=a,a=t,c=o.init||!0,l=o.data,r(l,a,d,c,s)):e.DataRepository.fetch(t,o.formatter).done(function(e){r(e,a,d,c,s)}),d.promise},initDropdown2Single:function(t,a,n,o){e.DataRepository.fetch(t).done(function(e){var t=i.map(e,function(e){return e?{id:e[n.valueName||"id"],text:e[n.textName||"text"]}:void 0});if(o&&t.splice(0,0,{id:"all",text:o}),a.data("moduleDropdown2"))a.dropdown2("set data",t);else{var s={allowCreate:n.allowCreate,data:t};n.onChange&&(s.onChange=n.onChange),a.dropdown2(s)}"function"==typeof n.callback&&n.callback()})},initDropdown2Multiple:function(t,a,n){e.DataRepository.fetch(t).done(function(e){var t=i.map(e,function(e){return e?{id:e[n.valueName||"id"]||e,text:e[n.textName||"text"]||e}:void 0});a.data("moduleDropdown2")?a.dropdown2("set data",t):a.dropdown2({action:"multiple",allowCreate:n.allowCreate,onChange:n.onChange,data:t}),"function"==typeof n.callback&&n.callback()})}}}),define("tpl!modules/settings/email/item/template.html",function(){return function(obj){var __p=[];with(obj||{})__p.push('<div>    <h3 class="title ui header item-title" data-i18n="settings.title.email" data-tip="settings.tips.edit-email-template"></h3>    <div class="ui info message">        <p data-i18n="settings.tip.email-template"></p>        <ul class="list">            <li><b>{{username}}</b><span data-i18n="settings.tip.email-template-username"></span></li>            <li><b>{{email}}</b><span data-i18n="settings.tip.email-template-email"></span></li>            <li><b>{{appname}}</b><span data-i18n="settings.tip.email-template-appname"></span></li>            <li><b>{{link}}</b><span data-i18n="settings.tip.email-template-link"></span></li>        </ul>    </div>    <div id="email_template_form" class="form-horizontal form-bordered ui form loading" role="form" autocomplete="off">        <form class="ui form  app-email-template  template-item">            <!-- <h4 class="ui header" data-i18n="settings.title.app-email-template"></h4> -->            <div class="two fields">                <div class="twelve wide field">                    <label data-i18n="settings.label.templateName" data-tip="settings.tip.templateName"></label>                    <input type="text" name="templateName" data-i18n="[placeholder]settings.label.templateName" class="validate validate-required" value="" />                </div>                <div class="four wide field required">                    <label data-i18n="settings.label.locale" data-tip="settings.tip.locale"></label>                    <div class="ui selection dropdown dropdown-language dropdown2-parts search" style="width: 100%">                        <input name="language" class="validate validate-arrayrequired js-value-input" type="hidden" value="en">                        <div class="default text"></div>                        <i class="dropdown icon"></i>                        <div class="menu">                            <!-- <div class="item" data-value="en"><i class="us flag"></i>English</div> <div class="item" data-value="zh"><i class="cn flag"></i>Chinese (Simplified)</div> <div class="item" data-value="tw"><i class="tw flag"></i>Chinese (Traditional)</div> <div class="item" data-value="ja"><i class="jp flag"></i>Japanese</div> <div class="item" data-value="fr"><i class="fr flag"></i>French</div>                            <div class="item" data-value="af"><i class="af flag"></i>Afrikaans</div><div class="item" data-value="am"><i class="am flag"></i>Amharic</div><div class="item" data-value="an"><i class="an flag"></i>Aragonese</div><div class="item" data-value="ar"><i class="ar flag"></i>Arabic</div><div class="item" data-value="as"><i class="as flag"></i>Assamese</div><div class="item" data-value="az"><i class="az flag"></i>Azerbaijani</div><div class="item" data-value="ba"><i class="ba flag"></i>Bashkir</div><div class="item" data-value="be"><i class="be flag"></i>Belarusian</div><div class="item" data-value="bg"><i class="bg flag"></i>Bulgarian</div><div class="item" data-value="bh"><i class="bh flag"></i>Bihari</div><div class="item" data-value="bi"><i class="bi flag"></i>Bislama</div><div class="item" data-value="bm"><i class="bm flag"></i>Bambara</div><div class="item" data-value="bn"><i class="bn flag"></i>Bengali</div><div class="item" data-value="bo"><i class="bo flag"></i>Tibetan Stan...</div><div class="item" data-value="br"><i class="br flag"></i>Breton</div><div class="item" data-value="bs"><i class="bs flag"></i>Bosnian</div><div class="item" data-value="ca"><i class="ca flag"></i>Catalan; Val...</div><div class="item" data-value="ch"><i class="ch flag"></i>Chamorro</div><div class="item" data-value="co"><i class="co flag"></i>Corsican</div><div class="item" data-value="cr"><i class="cr flag"></i>Cree</div><div class="item" data-value="cs"><i class="cs flag"></i>Czech</div><div class="item" data-value="cu"><i class="cu flag"></i>Old Church S...</div><div class="item" data-value="cv"><i class="cv flag"></i>Chuvash</div><div class="item" data-value="cy"><i class="cy flag"></i>Welsh</div><div class="item" data-value="de"><i class="de flag"></i>German</div><div class="item" data-value="ee"><i class="ee flag"></i>Ewe</div><div class="item" data-value="es"><i class="es flag"></i>Spanish; Cas...</div><div class="item" data-value="et"><i class="et flag"></i>Estonian</div><div class="item" data-value="eu"><i class="eu flag"></i>Basque</div><div class="item" data-value="fi"><i class="fi flag"></i>Finnish</div><div class="item" data-value="fj"><i class="fj flag"></i>Fijian</div><div class="item" data-value="fo"><i class="fo flag"></i>Faroese</div><div class="item" data-value="ga"><i class="ga flag"></i>Irish</div><div class="item" data-value="gd"><i class="gd flag"></i>Scottish Gae...</div><div class="item" data-value="gl"><i class="gl flag"></i>Galician</div><div class="item" data-value="gn"><i class="gn flag"></i>Guaraní</div><div class="item" data-value="gu"><i class="gu flag"></i>Gujarati</div><div class="item" data-value="hr"><i class="hr flag"></i>Croatian</div><div class="item" data-value="ht"><i class="ht flag"></i>Haitian; Hai...</div><div class="item" data-value="hu"><i class="hu flag"></i>Hungarian</div><div class="item" data-value="id"><i class="id flag"></i>Indonesian</div><div class="item" data-value="ie"><i class="ie flag"></i>Interlingue</div><div class="item" data-value="io"><i class="io flag"></i>Ido</div><div class="item" data-value="is"><i class="is flag"></i>Icelandic</div><div class="item" data-value="it"><i class="it flag"></i>Italian</div><div class="item" data-value="kg"><i class="kg flag"></i>Kongo</div><div class="item" data-value="ki"><i class="ki flag"></i>Kikuyu, Giku...</div><div class="item" data-value="km"><i class="km flag"></i>Khmer</div><div class="item" data-value="kn"><i class="kn flag"></i>Kannada</div><div class="item" data-value="kr"><i class="kr flag"></i>Kanuri</div><div class="item" data-value="kw"><i class="kw flag"></i>Cornish</div><div class="item" data-value="ky"><i class="ky flag"></i>Kirghiz, Kyr...</div><div class="item" data-value="la"><i class="la flag"></i>Latin</div><div class="item" data-value="lb"><i class="lb flag"></i>Luxembourgis...</div><div class="item" data-value="li"><i class="li flag"></i>Limburgish, ...</div><div class="item" data-value="lt"><i class="lt flag"></i>Lithuanian</div><div class="item" data-value="lu"><i class="lu flag"></i>Luba-Katanga...</div><div class="item" data-value="lv"><i class="lv flag"></i>Latvian</div><div class="item" data-value="mg"><i class="mg flag"></i>Malagasy</div><div class="item" data-value="mh"><i class="mh flag"></i>Marshallese</div><div class="item" data-value="mk"><i class="mk flag"></i>Macedonian</div><div class="item" data-value="ml"><i class="ml flag"></i>Malayalam</div><div class="item" data-value="mn"><i class="mn flag"></i>Mongolian</div><div class="item" data-value="mr"><i class="mr flag"></i>Marathi (Mar...</div><div class="item" data-value="ms"><i class="ms flag"></i>Malay</div><div class="item" data-value="mt"><i class="mt flag"></i>Maltese</div><div class="item" data-value="my"><i class="my flag"></i>Burmese</div><div class="item" data-value="na"><i class="na flag"></i>Nauru</div><div class="item" data-value="ne"><i class="ne flag"></i>Nepali</div><div class="item" data-value="ng"><i class="ng flag"></i>Ndonga</div><div class="item" data-value="nl"><i class="nl flag"></i>Dutch</div><div class="item" data-value="no"><i class="no flag"></i>Norwegian</div><div class="item" data-value="nr"><i class="nr flag"></i>South Ndebel...</div><div class="item" data-value="om"><i class="om flag"></i>Oromo</div><div class="item" data-value="pa"><i class="pa flag"></i>Panjabi, Pun...</div><div class="item" data-value="pl"><i class="pl flag"></i>Polish</div><div class="item" data-value="ps"><i class="ps flag"></i>Pashto, Push...</div><div class="item" data-value="pt"><i class="pt flag"></i>Portuguese</div><div class="item" data-value="ro"><i class="ro flag"></i>Romanian, Mo...</div><div class="item" data-value="ru"><i class="ru flag"></i>Russian</div><div class="item" data-value="rw"><i class="rw flag"></i>Kinyarwanda</div><div class="item" data-value="sa"><i class="sa flag"></i>Sanskrit (Sa...</div><div class="item" data-value="sc"><i class="sc flag"></i>Sardinian</div><div class="item" data-value="sd"><i class="sd flag"></i>Sindhi</div><div class="item" data-value="se"><i class="se flag"></i>Northern Sam...</div><div class="item" data-value="sg"><i class="sg flag"></i>Sango</div><div class="item" data-value="si"><i class="si flag"></i>Sinhala, Sin...</div><div class="item" data-value="sk"><i class="sk flag"></i>Slovak</div><div class="item" data-value="sl"><i class="sl flag"></i>Slovene</div><div class="item" data-value="sm"><i class="sm flag"></i>Samoan</div><div class="item" data-value="sn"><i class="sn flag"></i>Shona</div><div class="item" data-value="so"><i class="so flag"></i>Somali</div><div class="item" data-value="sr"><i class="sr flag"></i>Serbian</div><div class="item" data-value="st"><i class="st flag"></i>Southern Sot...</div><div class="item" data-value="sv"><i class="sv flag"></i>Swedish</div><div class="item" data-value="tg"><i class="tg flag"></i>Tajik</div><div class="item" data-value="th"><i class="th flag"></i>Thai</div><div class="item" data-value="tk"><i class="tk flag"></i>Turkmen</div><div class="item" data-value="tl"><i class="tl flag"></i>Tagalog</div><div class="item" data-value="tn"><i class="tn flag"></i>Tswana</div><div class="item" data-value="to"><i class="to flag"></i>Tonga (Tonga...</div><div class="item" data-value="tr"><i class="tr flag"></i>Turkish</div><div class="item" data-value="tt"><i class="tt flag"></i>Tatar</div><div class="item" data-value="ug"><i class="ug flag"></i>Uighur, Uygh...</div><div class="item" data-value="uz"><i class="uz flag"></i>Uzbek</div><div class="item" data-value="ve"><i class="ve flag"></i>Venda</div><div class="item" data-value="vi"><i class="vi flag"></i>Vietnamese</div><div class="item" data-value="za"><i class="za flag"></i>Zhuang, Chua...</div> -->                        </div>                    </div>                </div>            </div>            <div class="fields two">                <div class="field required">                    <label data-i18n="settings.label.from" data-tip="settings.tip.from"></label>                    <input type="text" name="from" data-i18n="[placeholder]settings.label.from" class="validate validate-required" value="" />                </div>                <div class="field" style="display: none;">                    <label data-i18n="settings.label.domain" data-tip="settings.tip.domain"></label>                    <input type="text" name="domain" data-i18n="[placeholder]settings.label.domain" class="validate validate-required" value="" />                </div>                <div class="field required">                    <label data-i18n="settings.label.subject" data-tip="settings.tip.subject"></label>                    <input type="text" name="subject" data-i18n="[placeholder]settings.label.subject" class="validate validate-required" value="" />                </div>            </div>            <div class="field" style="display:none;">                <label data-i18n="settings.label.text" data-tip="settings.tip.text"></label>                <textarea name="text" data-i18n="[placeholder]settings.label.text" rows="10" value="" />                </textarea>            </div>            <div class="field required">                <label data-i18n="settings.label.content" data-tip="settings.tip.content"></label>                <textarea name="content" data-i18n="[placeholder]settings.label.content" class="validate validate-required" rows="10"></textarea>            </div>        </form>    </div>    <div class="ui pull-right">        <a class="ui button  basic" href="#email" data-i18n="settings.tag.cancel"></a>        <a class="ui button primary  btn-save " href="javascript:void(null);" data-i18n="settings.tag.save" ></a>    </div></div>');return __p.join("")}}),define("modules/settings/email/item/view",["app","API","U","Logger","marionette","jquery","underscore","com_fun","core/functions/Validator","Q","core/functions/UI","i18n","tpl!./template.html","C"],function(e,t,i,a,n,o,s,r,l,c,d,u,p){return n.ItemView.extend({template:p,events:{"click .btn-save":"submitForm"},render:function(e){var t=this;n.ItemView.prototype.render.call(t),t.$el.i18n(),t.initShortUsage(e).setItemDifferentView().addFormLoading(),t.getTplRenderData().done(function(e){t.setTplInputValue(e),r.initSimpleDropdown("Store:Lang",t.$language,{},e.locale||"en"),t.removeFormLoading.call(t)})},initShortUsage:function(e){return this.objectId=e.id,this.$form=this.$el.find("#email_template_form"),this.$title=this.$el.find(".item-title"),this.$name=this.$el.find("input[name=templateName]"),this.$language=this.$el.find(".dropdown-language"),this.$from=this.$el.find("input[name=from]"),this.$content=this.$el.find("textarea[name=content]"),this.$domain=this.$el.find("input[name=domain]"),this.$subject=this.$el.find("input[name=subject]"),this.copySign=this.options.copySign,this},setItemDifferentView:function(){var e=this;return e.setItemTitle(),e.renderTips(),e},setItemTitle:function(){var e=this.options&&this.options.title||"unkown";return this.$title.attr("data-i18n",e).i18n(),this},renderTips:function(){this.$("[data-tip]").each(function(e,t){var i=o(t).attr("data-tip");
o(t).append('<i class="sem-helper-tip icomoon icomoon-help" data-sem-key="'+i+'"></i>')})},getTplRenderData:function(){var t=this,i=c.defer(),a={templateName:"",locale:"en",subject:"",domain:"",content:"",from:""},n=t.objectId,o=t.options.storeName;return n?e.DataRepository.getStore(o).getDataById(n).done(function(e){e=t.defaultTplI18n(e),i.resolve(e)}):i.resolve(a),i.promise},defaultTplI18n:function(e){var t={verify_email_tpl:"Verify Email",reset_password_tpl:"Reset Password Email"},i={verify_email_tpl:"settings.label.verify-email",reset_password_tpl:"settings.label.reset-password-email"};return e&&0===e.type&&t[e.templateName]&&(e.templateName=u.t(i[e.templateName])||t[e.templateName]),e},setTplInputValue:function(e){var t=this,i=this.copySign;i?t.$name.val("COPY_OF_"+e.templateName):(t.$name.val(e.templateName),t.objectId&&0===e.type&&t.$name.add(t.$language).addClass("disabled").attr("disabled","disabled")),t.$from.val(e.from),t.$domain.val(e.domain),t.$subject.val(e.subject),t.$content.val(e.content)},getValue:function(){var e;return e={templateName:this.$name.val(),locale:this.$language.dropdown("get value"),subject:this.$subject.val(),domain:this.$domain.val(),content:this.$content.val(),from:this.$from.val()},this.objectId&&!this.copySign&&delete e.templateName,e},addFormLoading:function(){return this.$form.addClass("loading"),this},removeFormLoading:function(){return this.$form.removeClass("loading"),this},isValid:function(){return l.check(this.$form)},submitForm:function(){var t=this,n=t.getValue(),o=t.options.storeName,s=t.isValid(),r=t.copySign,l=t.objectId||null;s&&(t.addFormLoading(),l&&!r?e.DataRepository.getStore(o).update(this.objectId,n).then(function(){i.jumpTo("#email"),a.success("common.success.update",{doI18n:!0})}).finally(function(){t.removeFormLoading()}):e.DataRepository.getStore(o).add(n).then(function(){t.removeFormLoading(),i.jumpTo("#email"),a.success("common.success.create",{doI18n:!0})}).finally(function(){t.removeFormLoading()}))}})}),define("tpl!component/table/PageTable/template.html",function(){return function(obj){var __p=[];with(obj||{})__p.push('<div class="portlet">    <div class="portlet-title">        <div class="caption"></div>        <div class="tabs"></div>        <div class="tools"></div>    </div>    <div class="portlet-body">        <div class="table-view" style="min-height:39px;">            <div class="view-placeholder">                <div class="no-data-view" style="display:none">                    <div class="empty-icon"></div>                    <div class="empty-message" data-i18n="common.title.no-data-view"></div>                </div>                <div class="loading-view" style="display:none">                    <div class="loading-icon">                        <div class="cube cube1"></div>                        <div class="cube cube2"></div>                        <div class="cube cube3"></div>                        <div class="cube cube4"></div>                    </div>                </div>            </div>        </div>    </div>    <div class="pagination">        <div class="ui basic buttons perpage pull-left"></div>        <div class="ui basic buttons page pull-right">            <div class="ui button prev disabled" data-i18n="common.tag.prev"></div>            <div class="ui button page-status">1 - 1</div>            <div class="ui button next disabled" data-i18n="common.tag.next"></div>        </div>    </div></div>');return __p.join("")}}),define("tpl!component/table/BasicTable/template.html",function(){return function(obj){var __p=[];with(obj||{})__p.push('<div class="portlet">    <div class="portlet-title">        <div class="caption"></div>        <div class="tabs">            <ul class="nav nav-tabs" role="tablist">            </ul>        </div>        <div class="tools"></div>    </div>    <div class="portlet-body">        <div class="table-view" style="min-height:39px;">            <div class="view-placeholder">                <div class="no-data-view" style="display:none">                    <div class="empty-icon"></div>                    <div class="empty-message" data-i18n="common.title.no-data-view"></div>                </div>                <div class="loading-view" style="display:none">                    <div class="loading-icon">                        <div class="cube cube1"></div>                        <div class="cube cube2"></div>                        <div class="cube cube3"></div>                        <div class="cube cube4"></div>                    </div>                </div>            </div>        </div>    </div></div>');return __p.join("")}}),define("extend/ui/AdvancedTable",["jquery","underscore","i18n"],function(e,t,i){var a={display_header:!0,table_class:"",header_class:"",body_class:"",header_cell_class:"",cell_class:"",row_color:!1},n=function(i,n,o,s){var r=t.extend({},a,s);if(0==e(i).length)throw new Error("AdvancedTable: 1st argument must be root");this.root=e('<table class="'+r.table_class+'"><thead class="'+r.header_class+'"></thead><tbody class="'+r.body_class+'"></tbody></table>').prependTo(e(i)),this.render(n,o,r)};return n.prototype.render=function(e,i,n){var o=t.extend({},a,n),s=this.root,r=s.children("thead"),l=s.children("tbody");r.html(""),l.html(""),o.display_header&&this.renderHead(i,o),this.renderBody(e,i,o)},n.prototype.renderBody=function(t,i,a){var n=this.root.children("tbody");for(var o in t){var s=t[o],r=e("<tr></tr>").appendTo(n);if(a.row_color){var l=o%2==0?"even":"odd";r.addClass(l)}for(var c in i){var d=i[c],u=d.field,p=d.cssClass,m=d.formatter,f=m?m(o,c,s[u],d,s):s[u],h=e("<td>"+f+"</td>").appendTo(r).addClass(a.cell_class);d.visible&&h.css("overflow","visible"),p&&h.addClass(p)}}},n.prototype.clearBody=function(){var e=this.root.children("tbody");e.html("")},n.prototype.renderHead=function(t,a){var n=this.root.children("thead");for(var o in t){var s=t[o],r=a.doI18n?i.t(s.name)||s.name:s.name,l=s.cssClass,c=e('<th data-value="'+s.field+'">'+r+"</th>");s.sortable&&c.addClass("sorted"),a.field==s.field&&c.addClass(a.rule>0?"ascending":"descending"),s.width&&c.attr("width",s.width),c.appendTo(n).addClass(a.header_cell_class),l&&c.addClass(l)}},n.prototype.destroy=function(){var e=this.root,t=e.children("thead"),i=e.children("tbody");t.html(""),i.html("")},n}),define("component/table/BasicTable/view",["app","U","dispatcher","tpl!./template.html","marionette","jquery","underscore","extend/ui/AdvancedTable","i18n"],function(e,t,i,a,n,o,s,r,l){return n.ItemView.extend({template:a,events:{"click th.sorted":"changeSort"},init:function(){var e=this.options.storeName;i.on("refresh:"+e,this.renderComponent,this,"Component")},beforeShow:function(){},initGrid:function(){var e=this.options.doI18n?l.t(this.options.title):this.options.title;this.$(".caption").text(e),this.initSort()},initSort:function(){this.order=this.options.order},setSort:function(e,t){this.$("th.sorted").removeClass("ascending descending"),this.$('th[data-value="'+e+'"]').addClass(t),this.order=""==t?!1:{rule:"ascending"==t?1:-1,field:e}},changeSort:function(e){var t=o(e.currentTarget).attr("data-value"),i=o(e.currentTarget).hasClass("descending")?"ascending":"descending";this.setSort(t,i),this.options.static_data?this.renderComponent():this.refresh(),e.stopPropagation()},renderComponent:function(){var t=this,i=this.options.storeName,a=this.options.stateName,n=this.getValue();e.DataRepository.fetch(i,a,n).done(function(e){t.renderGrid(e)})},showLoading:function(){this.$(".view-placeholder").addClass("show"),this.$("tbody").hide(),this.$(".view-placeholder>.no-data-view").is(":visible")&&this.$(".view-placeholder>.no-data-view").hide(),this.$(".view-placeholder>.loading-view").show()},hideLoading:function(){this.$(".view-placeholder").removeClass("show"),this.$("tbody").show(),this.$(".view-placeholder>.loading-view").hide()},showNoData:function(){this.$(".view-placeholder").addClass("show relative"),this.$(".view-placeholder>.no-data-view").show(),this.$("thead").addClass("no-border")},hideNoData:function(){this.$(".view-placeholder").removeClass("show relative"),this.$(".view-placeholder>.no-data-view").hide(),this.$("thead").removeClass("no-border")},renderGrid:function(e){this.hideLoading(),e&&0!=e.length?this.hideNoData():this.showNoData(),this.table.render(e,this.options.columns,s.extend({},this.options.options,this.order))},render:function(){n.ItemView.prototype.render.call(this),this.table=new r(this.$(".table-view"),{},this.options.columns,this.options.options),this.initGrid(),this.$el.i18n(),this.options.static_data?this.renderComponent():this.refresh()},getValue:function(){var e=this.order;return{order:e}},refresh:function(){var t=this.options.storeName;this.showLoading(),e.DataRepository.refresh(t)},beforeHide:function(){this.table&&this.table.destroy()}})}),define("component/table/PageTable/view",["app","U","dispatcher","tpl!./template.html","component/table/BasicTable/view","jquery","underscore","i18n","semanticui_dropdown"],function(e,t,i,a,n,o,s,r){return n.extend({template:a,events:{"click .perpage.buttons>.button":"changePerpage","click .page.buttons>.button":"changePage","click th.sorted":"changeSort"},beforeShow:function(){var e=this.options.valueEventName;i.on("Request.getValue:"+e,this.getValue,this,"Component"),i.on("Request.restorePager:"+e,this.restorePager,this,"Component")},initGrid:function(){var e=this.options.doI18n?r.t(this.options.title):this.options.title;this.$(".caption").text(e),this.options.page&&this.options.page.length>0&&this.initPage(),this.initSort()},initPage:function(){var e=this.options.page,t=[];s.forEach(e,function(e){var i=o('<div class="ui button" data-value="'+e.value+'">'+e.name+"</div>");t.push(i)}),this.pagebar={start:1,end:1},this.perpage=e[0].value,this.page=1,this.maxPage=1,this.$(".perpage.buttons").html(t),this.$(".perpage.buttons>.button[data-value="+this.perpage+"]").addClass("active")},changePerpage:function(e){o(e.currentTarget).is(".active")||o(e.currentTarget).is(".disabled")||(this.$(".perpage.buttons>.button").removeClass("active"),o(e.currentTarget).addClass("active"),this.perpage=parseInt(o(e.currentTarget).attr("data-value")),this.page=1,this.options.static_data?this.renderComponent():this.refresh())},changePage:function(e){o(e.currentTarget).hasClass("disabled")||(o(e.currentTarget).hasClass("prev")?this.page>1&&(o(e.currentTarget).addClass("disabled"),this.page--,this.options.static_data?this.renderComponent():this.refresh()):o(e.currentTarget).hasClass("next")&&this.page<this.maxPage&&(o(e.currentTarget).addClass("disabled"),this.page++,this.options.static_data?this.renderComponent():this.refresh()))},getValue:function(){var e=this.perpage+1,t=(this.page-1)*this.perpage,i=this.order;return{limit:e,skip:t,order:i}},renderPagebar:function(e,t){this.pagebar.start=e,this.pagebar.end=t,this.$(".page-status").text(e+" - "+t),this.$(".button.next,.button.prev").addClass("disabled"),this.maxPage>this.page&&this.$(".page.buttons>.next").removeClass("disabled"),this.page>1&&this.$(".page.buttons>.prev").removeClass("disabled")},restorePager:function(){var e=this.options.page;0!==e.length&&(this.page=1)},renderGrid:function(e){var t,i;this.hideLoading(),e&&0!=e.length?this.hideNoData():this.showNoData();var a=(this.page-1)*this.perpage+1;e&&e.length>this.perpage?(this.maxPage=this.page+1,t=e.slice(0,-1),i=a+e.length-2):(this.maxPage=this.page,t=e,i=a+e.length-1),this.renderPagebar(a,i),this.table.render(t,this.options.columns,s.extend({},this.options.options,this.order))},showLoading:function(){this.$(".view-placeholder").removeClass("relative").addClass("show"),this.$("tbody").hide(),this.$(".view-placeholder>.no-data-view").is(":visible")&&this.$(".view-placeholder>.no-data-view").hide(),this.$(".view-placeholder>.loading-view").show()},hideLoading:function(){this.$(".view-placeholder").removeClass("show"),this.$("tbody").show(),this.$(".view-placeholder>.loading-view").hide()},showNoData:function(){this.$(".view-placeholder").addClass("show relative"),this.$(".view-placeholder>.no-data-view").show(),this.$(".pagination").hide(),this.$("thead").addClass("no-border")},hideNoData:function(){this.$(".view-placeholder").removeClass("show relative"),this.$(".view-placeholder>.no-data-view").hide(),this.$(".pagination").show(),this.$("thead").removeClass("no-border")},renderComponent:function(){var t=this,i=this.options.storeName,a=this.options.stateName;this.options.static_data||this.showLoading();var n=this.getValue();e.DataRepository.fetch(i,a,n).done(function(e){t.renderGrid(e)})},beforeHide:function(){var e=this.options.valueEventName;i.off("Request.getValue:"+e,"Component"),i.off("Request.restorePager:"+e,"Component"),this.table&&this.table.destroy()}})}),define("modules/settings/email/list/view",["app","Logger","component/table/PageTable/view","core/functions/UI","C","i18n"],function(e,t,i,a,n,o){return i.extend({delConfig:{DIALOG_TITLE:"Delete Template",DIALOG_CONTENT:"Confirm to delete",DIALOG_SIZE:"small",SUCCESS_DELETE:"common.success.delete"},events:{"click .perpage.buttons>.button":"changePerpage","click .page.buttons>.button":"changePage","click th.sorted":"changeSort","click .trash":"deleteItem"},initGrid:function(){var e=this.options.doI18n?o.t(this.options.title):this.options.title,t=this.options.tabs;this.$(".caption").text(e),this.$(".caption").after('<i class="sem-helper-tip icomoon icomoon-help" data-sem-key="settings.tips.mail-templates"></i>'),this.options.page&&this.options.page.length>0&&this.initPage(),t&&t.components&&t.components.length>0&&(this.initTabs(),this.setEmailVerify()),this.initSort()},initTabs:function(){var e=this.options.tabs.components,t=this.$(".tabs"),i=$('<div class="ui pull-right"></div>');$.each(e,function(e,t){var a=new t.constructor({id:t.name});i.append(a.render().$el)}),t.append(i)},setEmailVerify:function(){var t=this;e.DataRepository.fetchNew("Store:Application").done(function(e){var i=t.$(".ui.checkbox.verifyemail"),a=i.find("input[type=checkbox]");a.prop("checked",e&&e.emailConfig&&e.emailConfig.verifyEmail||!1),i.checkbox()})},deleteItem:function(i){var n=this,o=$(i.currentTarget).attr("data-value"),s=n.options.storeName,r=n.delConfig;a.showDialog(r.DIALOG_TITLE,r.DIALOG_CONTENT,{size:r.DIALOG_SIZE,success:function(){e.DataRepository.getStore(s).delete(o).then(function(){t.success(r.SUCCESS_DELETE,{doI18n:!0}),n.refresh()}),a.hideDialog()}})}})}),define("tpl!modules/settings/email/toolbar/template.html",function(){return function(obj){var __p=[];with(obj||{})__p.push('<div class="ui">    <div class="ui pull-right">        <a class="ui button green create-new-role  labeled icon" href="#email/new">            <i class="icon plus"></i>            <span data-i18n="settings.email.create-new"></span>        </a>    </div>    <div class="ui search pull-right" style="margin-right:10px;">        <div class="ui icon input">            <input type="text" name="search" data-i18n="[placeholder]common.placeholder.search">            <i class="search icon"></i>        </div>    </div></div>');return __p.join("")}}),define("modules/settings/email/toolbar/view",["underscore","jquery","backbone","marionette","app","Logger","dispatcher","tpl!./template.html"],function(e,t,i,a,n,o,s,r){return a.ItemView.extend({template:r,events:{"keyup input":"changeInput"},beforeShow:function(){var e=this.options.valueEventName;s.on("Request.getValue:"+e,this.getValue,this,"SearchContainer")},beforeHide:function(){var e=this.options.valueEventName;s.off("Request.getValue:"+e,"Component")},render:function(e){var t=this;a.ItemView.prototype.render.call(t),t.initShortUsage(e).initUI()},initShortUsage:function(e){return this.$title=this.$(".item-title"),this.objectId=e.id,this},initUI:function(){var e=this;return e.$el.i18n(),e.renderTips(),e},renderTips:function(){var e=this;e.$el.find("[data-tip]").each(function(e,i){{var a=t(i).attr("data-tip");t(i).find("i[data-sem-key]")}0==t(i).find("i[data-sem-key]").length&&t(i).append('<i class="sem-helper-tip" data-sem-key="'+a+'"></i>')})},getValue:function(){var e=this.$("[name=search]").val();return e?JSON.stringify({templateName:{$regex:"\\Q"+e+"\\E",$options:"i"}}):{}},changeInput:function(){var e=this,t=e.options.connectTableValueEventName;e.updateFilter(),s.request("restorePager:"+t,{},"Component")},updateFilter:function(){return e(function(){n.DataRepository.refresh("Store:Email")}).debounce(200)}()})}),define("tpl!modules/settings/email/verify/template.html",function(){return function(obj){var __p=[];with(obj||{})__p.push('<div class="inline field ui pull-left">    <div class="ui toggle checkbox verifyemail">        <input type="checkbox" name="emailConfig.verifyEmail">        <label data-i18n="settings.title.verify-email"></label>    </div>    <label data-tip="settings.tip.verify-email"></label></div>');return __p.join("")}}),define("modules/settings/email/verify/view",["marionette","app","tpl!./template.html","Logger"],function(e,t,i,a){return e.ItemView.extend({template:i,events:{"click .ui.checkbox":"updateEmailVerify"},render:function(){var t=this;return e.ItemView.prototype.render.call(t),t.$verifyEmail=t.$el.find(".ui.checkbox"),t},updateEmailVerify:function(){var e=this;t.DataRepository.getStore("Store:Application").updateData({emailConfig:{verifyEmail:e.$verifyEmail.checkbox("is checked")}}).done(function(){a.success("common.success.update",{doI18n:!0})})}})}),define("modules/settings/email/layout",["app","core/functions/Formatter","layout/BasicLayout","container/BasicContainer","../../common/ToolbarContainer","C","./store","./item/view","./list/view","./toolbar/view","./verify/view"],function(e,t,i,a,n,o,s,r,l,c,d){return{email:{constructor:i,root:"#settings-email",store:s,state:{"default":[{container:n,template:'<div class="container-normal"></div>',components:[{name:"email-template-toolbar",constructor:c,options:{valueEventName:"Search",connectTableValueEventName:"TemplateList"}}]},{container:a,root:".container",template:'<div class="container-normal"></div>',components:[{name:"email-template-list",constructor:l,options:{title:"settings.title.email-template",doI18n:!0,valueEventName:"TemplateList",tabs:{components:[{name:"email-settings-verify",constructor:d}]},page:[{value:20,name:"20"},{value:50,name:"50"},{value:100,name:"100"}],columns:[{name:"settings.field.template-name",field:"templateName",id:"templateName",sortable:!0,formatter:function(e,t,i,a,n){return'<a class="link" href="#email/edit/'+n.objectId+'">'+i+"</a>"}},{name:"settings.field.language",field:"locale_name",id:"locale_name",formatter:function(e,t,i){return i}},{name:"settings.field.subject",field:"subject",id:"subject",sortable:!0},{name:"settings.field.action",cssClass:"action",field:"objectId",id:"objectId",formatter:function(e,t,i,a,n){var o='<i class="action trash icon" data-value="'+i+'"></i>',s='<a class="link" href="#email/copy/'+n.objectId+'"><i class="action copy icon" data-value="'+i+'"></i></a>';return 0===n.type?s:o+s}}],options:_.extend({},o.get("UI.Table"),{doI18n:!0})},extend:{storeName:"Store:Email"}}]}],"new":[{container:a,root:".container",template:'<div class="container-normal"></div>',components:[{name:"email-form",constructor:r,options:{stateName:"email",title:"settings.email.create-new"},extend:{storeName:"Store:Email"}}]}],edit:[{container:a,root:".container",template:'<div class="container-normal"></div>',components:[{name:"email-form",constructor:r,options:{stateName:"email",title:"settings.email.edit"},extend:{storeName:"Store:Email"}}]}],copy:[{container:a,root:".container",template:'<div class="container-normal"></div>',components:[{name:"email-form",constructor:r,options:{stateName:"email",title:"settings.email.copy",copySign:!0},extend:{storeName:"Store:Email"}}]}]}}}}),define("text!modules/settings/iap/form/template.html",[],function(){return'<div class="ui form">\n    <h4 class="ui header" data-i18n="settings.title.google-play" data-tip="settings.tips.google-play"></h4>\n    <div class="field">\n        <label data-i18n="settings.title.refresh-token" data-tip="settings.tips.refresh-token"></label>\n        <input type="text" name="iap.GooglePlay.refreshToken" value="<%- googleRefreshToken %>">\n    </div>\n    <div class="field">\n        <label data-i18n="settings.title.client-id" data-tip="settings.tips.client-id"></label>\n        <input type="text" name="iap.GooglePlay.clientId" value="<%- googleClientId %>">\n    </div>\n    <div class="field">\n        <label data-i18n="settings.title.client-secret" data-tip="settings.tips.client-secret"></label>\n        <input type="text" name="iap.GooglePlay.clientSecret" value="<%- googleClientSecret %>">\n    </div>\n    <!-- <div class="field">\n        <label data-i18n="settings.title.default-access-token"></label>\n        <input type="text" name="iap.GooglePlay.defaultAccessToken" value="<%- googleDefaultAccessToken %>">\n    </div> -->\n\n    <h4 class="ui header" data-i18n="settings.title.amazon" data-tip="settings.tips.amazon"></h4>\n\n    <div class="field">\n        <label data-i18n="settings.title.developer-secret" data-tip="settings.tips.developer-secret"></label>\n        <input type="text" name="iap.Amazon.developerSecret" value="<%- amazonDevelopSecret %>">\n    </div>\n\n    <div class="ui clearing"></div>\n    <div class="ui primary submit button right floated" data-i18n="common.tag.save-change"></div>\n</div>'}),define("modules/settings/iap/form/view",["app","Logger","../../common/component/BasicForm","text!./template.html","jquery","underscore","i18n"],function(e,t,i,a,n,o){return i.extend({template:o.template(a)})}),define("modules/settings/iap/layout",["./form/view","core/functions/Formatter","layout/BasicLayout","container/BasicContainer"],function(e,t,i,a){return{iap:{constructor:i,root:"#settings-iap",state:{"default":[{container:a,root:".container",template:'<div class="container-normal"></div>',components:[{name:"iap-form",constructor:e,options:{stateName:"iap"},extend:{storeName:"Store:Application"}}]}]}}}}),define("text!modules/settings/system/form/template.html",[],function(){return'<div class="ui form">\n    <h3 class="ui header" data-i18n="settings.title.system" data-tip="settings.tips.system"></h3>\n\n    <div class="inline field">\n        <div class="ui toggle checkbox offline">\n            <input type="checkbox" name="enableOfflineAna" <% if(enableOfflineAna){%> checked <%}%> >\n            <label data-i18n="[prepend]settings.title.app-offlineanalysis" data-tip="settings.tip.app-offlineanalysis"></label>\n        </div>\n    </div>\n\n    <div class="ui clearing"></div>\n    <div class="ui primary submit button right floated" data-i18n="common.tag.save-change"></div>\n</div>'}),define("modules/settings/system/form/view",["app","Logger","../../common/component/BasicForm","text!./template.html","jquery","underscore","i18n"],function(e,t,i,a,n,o,s){return i.extend({template:o.template(a),getValue:function(){return{enableOfflineAna:this.$(".offline.checkbox").checkbox("is checked")}},saveData:function(i){var a=this.getValue();e.DataRepository.getStore("Store:mApplication").updateOfflineanalysis(a).then(function(){t.success(s.t("common.success.update"))}).finally(function(){n(i.currentTarget).removeClass("loading")})}})}),define("modules/settings/system/layout",["./form/view","core/functions/Formatter","layout/BasicLayout","container/BasicContainer"],function(e,t,i,a){return{system:{constructor:i,root:"#settings-system",state:{"default":[{container:a,root:".container",template:'<div class="container-normal"></div>',components:[{name:"system-form",constructor:e,options:{stateName:"system"},extend:{storeName:"Store:Application"}}]}]}}}}),define("modules/settings/router",["app","C","dispatcher","jquery","backbone","marionette"],function(e,t,i,a,n){return n.Marionette.AppRouter.extend({appRoutes:{"(:action)(/:state)(/:objectId)":"renderPageLayout"},controller:{renderPageLayout:function(e,t,a){e||(e="general"),this.renderSideBar(e),i.trigger("hide",{action:e,state:t,options:{id:a}},"Layout"),i.trigger("show",{action:e,state:t,options:{id:a}},"Layout")},renderSideBar:function(e){var t=a("#main-sidebar .list>a[href=#"+e+"]");a("#main-sidebar .list>a").removeClass("active"),t.addClass("active");var i=t.find(".tip").text();a("#main-toolbar .menu-name").text(i)}}})}),define("modules/settings/common/AppStore",["API","data/Task","store/RestStore","Q","underscore"],function(e,t,i,a){var n=i.extend({removeApp:function(e){var i=this._origin_data.data,n=a.defer(),o=i.options.url+"/delete",s=t.create({url:o,method:"post",params:e});return s.start().done(function(e){3!=s.state?n.resolve(e):n.reject(e)}),n.promise},updateData:function(e){var i=this._origin_data.data,n=a.defer(),o=i.options.url,s=t.create({url:o,method:"put",params:e});return s.start().done(function(e){3!=s.state?n.resolve(e):n.reject(e)}),n.promise},updateOfflineanalysis:function(e){var i=this._origin_data.data,n=a.defer(),o=i.options.url,s=t.create({url:o,method:"post",params:e});return s.start().done(function(e){3!=s.state?n.resolve(e):n.reject(e)}),n.promise},updateSetting:function(i){var n=a.defer(),o=t.create({url:e.get("Marketing")+"/push/setting",method:"put",params:i});return o.start().done(function(e){3!=o.state?n.resolve(e):n.reject(e)}),n.promise}});return n.create=function(e){var t=new n;return 0==t.initialize(e||{})?!1:t},n}),define("modules/settings/store",["C","dispatcher","data/Task","data/Store","./common/AppStore","underscore"],function(e,t,i,a,n,o){return[{name:"Store:Application",constructor:n,initialize:!1,task:i,taskOptions:{url:"Data.SingleApp",formatter:function(e){return e},buffer:{}},state:{general:function(e){var t=e.metadata||(e.metadata={}),i=e.platforms||{},a=e.appStoreIds||{},n=e.urlSchemas||{};/^((http|https):\/\/)?(.*)/.test(t.url);var o=RegExp.$1?t.url:"http://"+RegExp.$3;return{app_name:e.name,appType:e.appType||"App",default_lang:e.defaultLang,production:t.production,product_name:t.name,app_url:t.url?o:"",desc:t.desc,app_icon:t.icon,itunesid:a.itunesId,"package":a.packageName,uandroid:n.android,uios:n.ios,enableCreateObject:e.enableCreateObject,platforms:i,ios:i["iTunes App Store"],android:i["Google Play Store"],web:i.Web,windows:i["Windows App Store"]}},application:function(e){return{objectId:e.objectId,clientKey:e.clientKey,restAPIKey:e.restAPIKey,javascriptKey:e.javascriptKey,netKey:e.netKey,masterKey:e.masterKey}},notification:function(e){var t=e.pushConfig||(e.pushConfig={}),i=t.appleConfig||(t.appleConfig={}),a=t.windowsConfig||(t.windowsConfig={}),n=t.gcmConfig||(t.gcmConfig={});return{cert:"string"==typeof i.key?i.key:!1,password:"string"==typeof i.password?i.password:"",apiKey:"string"==typeof n.apiKey?n.apiKey:"",senderId:"string"==typeof n.senderId?n.senderId:"",sid:"string"==typeof a.packageSid?a.packageSid:"",client_secret:"string"==typeof a.clientSecret?a.clientSecret:""}},email:function(e){var t=e.emailConfig||(e.emailConfig={});return{verifyEmail:t.verifyEmail,pwdResetPage:t.pwdResetPage,pwdSucessPage:t.pwdSucessPage,verifySucessPage:t.verifySucessPage,invalidLinkPage:t.invalidLinkPage}},authentication:function(e){var t=e.authConfig||(e.authConfig={}),i=t.faceBookAuth||(t.faceBookAuth={}),a=t.twitterAuth||(t.twitterAuth={});return{anonymousUser:t.anonymousUser||!1,baseUserName:t.baseUserName||!1,defaultAuth:t.defaultAuth,faceBookAuth:i.authEnable||!1,faceBookKey:i.appInfos||[],twitterAuth:a.authEnable||!1,twitterKey:a.consumerKeys}},iap:function(e){var t=e.iap||(e.iap={}),i=t.GooglePlay||(t.GooglePlay={}),a=t.Amazon||(t.Amazon={});return{googleRefreshToken:i.refreshToken,googleClientId:i.clientId,googleClientSecret:i.clientSecret,googleDefaultAccessToken:i.defaultAccessToken,amazonDevelopSecret:a.developerSecret}},system:function(e){return{enableOfflineAna:e.enableOfflineAna}}}},{name:"Store:Lang",constructor:a,initialize:!0,task:i,taskOptions:{url:"Lang",formatter:function(e){if(e){var t=o.map(e,function(e){return{id:e.code,text:e.name}});return o.sortBy(t,function(e){return e.text})}return[]}}}]}),define("modules/settings/bootstrapper",["app","C","core/functions/LayoutRender","core/functions/StoreLoader","modules/common/bootstrapper","./general/layout","./application/layout","./notification/layout","./authentication/layout","./email/layout","./iap/layout","./system/layout","./router","./store","jquery","backbone","core/functions/UI","pace"],function(e,t,i,a,n,o,s,r,l,c,d,u,p,m,f,h){n.init(!0).done(function(){var n=t.get("User.AppId");n&&t.set("Ajax.HTTPHEADER.X-LAS-AppId",n),i.render(o),i.render(s),i.render(r),i.render(l),i.render(c),i.render(d),i.render(u),a.load(m),e.Router=new p,h.history.start()})}),require(["main","jquery"],function(){require(["extra"],function(){require(["modules/settings/bootstrapper"])})}),define("settingsMain",function(){});